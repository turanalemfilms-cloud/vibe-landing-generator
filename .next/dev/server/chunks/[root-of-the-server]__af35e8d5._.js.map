{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/lib/siteConfig.ts"],"sourcesContent":["import { z } from 'zod'\n\nexport const StyleKey = z.enum(['minimalist_tech', 'bold_modern', 'clean_corporate'])\nexport type StyleKey = z.infer<typeof StyleKey>\n\nexport const SiteBriefSchema = z.object({\n  businessName: z.string().min(1),\n  targetAudience: z.string().min(1),\n  services: z.array(z.string().min(1)).min(1),\n  uniqueSellingPoints: z.array(z.string().min(1)).min(1),\n  cta: z\n    .object({\n      label: z.string().min(1),\n      href: z.string().min(1),\n    })\n    .default({ label: 'Өтінім қалдыру', href: '#lead' }),\n  language: z.literal('KZ').default('KZ'),\n})\nexport type SiteBrief = z.infer<typeof SiteBriefSchema>\n\nexport const TailwindStyleTokensSchema = z.object({\n  fontHeading: z.string().min(1),\n  fontBody: z.string().min(1),\n  bg: z.string().min(1),\n  card: z.string().min(1),\n  text: z.string().min(1),\n  muted: z.string().min(1),\n  border: z.string().min(1),\n  accent: z.string().min(1),\n  accentText: z.string().min(1),\n  accentRing: z.string().min(1),\n  radiusCard: z.string().min(1),\n  radiusCardSm: z.string().min(1),\n  radiusButton: z.string().min(1),\n  radiusPill: z.string().min(1),\n  heroPadding: z.string().min(1),\n  sectionPadding: z.string().min(1),\n})\nexport type TailwindStyleTokens = z.infer<typeof TailwindStyleTokensSchema>\n\nexport const BrandTokensSchema = z.object({\n  brandName: z.string().min(1),\n  colors: z.object({\n    // iOS 26-style system colors (light mode)\n    light: z.object({\n      bg: z.string().min(1), // hex\n      surface: z.string().min(1),\n      text: z.string().min(1),\n      muted: z.string().min(1),\n      border: z.string().min(1),\n      primary: z.string().min(1), // iOS system color (Blue/Green/Orange/Red/Purple/Pink)\n      primaryText: z.string().min(1),\n      accent: z.string().min(1),\n      secondary: z.string().optional(), // iOS secondary color\n    }),\n    // iOS 26-style system colors (dark mode)\n    dark: z.object({\n      bg: z.string().min(1),\n      surface: z.string().min(1),\n      text: z.string().min(1),\n      muted: z.string().min(1),\n      border: z.string().min(1),\n      primary: z.string().min(1),\n      primaryText: z.string().min(1),\n      accent: z.string().min(1),\n      secondary: z.string().optional(),\n    }),\n  }),\n  typography: z.object({\n    heading: z.enum(['space', 'syne', 'manrope']),\n    body: z.enum(['inter', 'manrope']),\n  }),\n  radius: z.object({\n    card: z.enum(['xl', '2xl', '3xl']),\n    button: z.enum(['xl', '2xl']),\n  }),\n  assets: z\n    .object({\n      heroBgSvg: z.string().min(1),\n    })\n    .optional(),\n})\nexport type BrandTokens = z.infer<typeof BrandTokensSchema>\n\n// iOS 26 system color palette (vibrant, saturated)\nexport const iOS26SystemColors = {\n  blue: { light: '#007AFF', dark: '#0A84FF' },\n  green: { light: '#34C759', dark: '#30D158' },\n  orange: { light: '#FF9500', dark: '#FF9F0A' },\n  red: { light: '#FF3B30', dark: '#FF453A' },\n  purple: { light: '#AF52DE', dark: '#BF5AF2' },\n  pink: { light: '#FF2D55', dark: '#FF375F' },\n  yellow: { light: '#FFCC00', dark: '#FFD60A' },\n  indigo: { light: '#5856D6', dark: '#5E5CE6' },\n  teal: { light: '#5AC8FA', dark: '#64D2FF' },\n  mint: { light: '#00C7BE', dark: '#66EFE5' },\n} as const\n\nexport type iOS26SystemColorName = keyof typeof iOS26SystemColors\n\nexport const LandingContentSchema = z.object({\n  hero: z.object({\n    badge: z.string().min(1),\n    headline: z.string().min(1),\n    subheadline: z.string().min(1),\n  }),\n  stats: z\n    .object({\n      title: z.string().min(1),\n      items: z.array(z.object({ label: z.string().min(1), value: z.string().min(1) })).min(2).max(4),\n    })\n    .optional(),\n  features: z.object({\n    title: z.string().min(1),\n    items: z.array(\n      z.object({\n        title: z.string().min(1),\n        description: z.string().min(1),\n      })\n    ).min(3).max(6),\n  }),\n  testimonials: z\n    .object({\n      title: z.string().min(1),\n      items: z\n        .array(\n          z.object({\n            name: z.string().min(1),\n            role: z.string().min(1),\n            quote: z.string().min(1),\n          })\n        )\n        .min(2)\n        .max(4),\n    })\n    .optional(),\n  faq: z\n    .object({\n      title: z.string().min(1),\n      items: z.array(z.object({ q: z.string().min(1), a: z.string().min(1) })).min(3).max(6),\n    })\n    .optional(),\n  pricing: z.object({\n    title: z.string().min(1),\n    plans: z.array(\n      z.object({\n        name: z.string().min(1),\n        price: z.string().min(1),\n        description: z.string().min(1),\n        bullets: z.array(z.string().min(1)).min(3).max(8),\n        highlighted: z.boolean().default(false),\n      })\n    ).min(2).max(3),\n  }),\n  finalCta: z\n    .object({\n      title: z.string().min(1),\n      subtitle: z.string().min(1),\n    })\n    .optional(),\n  footer: z.object({\n    note: z.string().min(1),\n  }),\n})\nexport type LandingContent = z.infer<typeof LandingContentSchema>\n\nexport const SectionType = z.enum([\n  'hero',\n  'stats',\n  'features',\n  'pricing',\n  'testimonials',\n  'faq',\n  'lead',\n  'footer',\n])\nexport type SectionType = z.infer<typeof SectionType>\n\nexport const SiteLayoutSectionSchema = z.object({\n  type: SectionType,\n  variant: z.string().min(1).optional(),\n  anchor: z.string().min(1).optional(),\n})\nexport type SiteLayoutSection = z.infer<typeof SiteLayoutSectionSchema>\n\nexport const SiteLayoutSchema = z.object({\n  sections: z.array(SiteLayoutSectionSchema).min(3).max(12),\n})\nexport type SiteLayout = z.infer<typeof SiteLayoutSchema>\n\nexport const FreeformHtmlSchema = z.object({\n  html: z.string().min(1), // Full HTML (sanitized)\n  css: z.string().min(1).optional(), // Optional separate CSS\n  js: z.string().optional(), // Optional JS (sanitized, no eval/Function)\n})\nexport type FreeformHtml = z.infer<typeof FreeformHtmlSchema>\n\nexport const SiteConfigSchema = z.object({\n  version: z.literal(1),\n  styleKey: StyleKey,\n  tokens: TailwindStyleTokensSchema,\n  brand: BrandTokensSchema.optional(),\n  brief: SiteBriefSchema,\n  content: LandingContentSchema,\n  layout: SiteLayoutSchema.optional(),\n  freeform: FreeformHtmlSchema.optional(), // Free-form HTML/CSS/JS (Cursor-like)\n})\nexport type SiteConfig = z.infer<typeof SiteConfigSchema>\n\nexport function defaultLayoutForContent(content: LandingContent): SiteLayout {\n  const sections: SiteLayoutSection[] = [\n    { type: 'hero', variant: 'split', anchor: 'top' },\n  ]\n  if (content.stats) sections.push({ type: 'stats', variant: 'cards' })\n  sections.push({ type: 'features', variant: 'grid', anchor: 'features' })\n  sections.push({ type: 'pricing', variant: 'cards', anchor: 'pricing' })\n  if (content.testimonials) sections.push({ type: 'testimonials', variant: 'quotes' })\n  if (content.faq) sections.push({ type: 'faq', variant: 'accordion', anchor: 'faq' })\n  sections.push({ type: 'lead', variant: 'form', anchor: 'lead' })\n  sections.push({ type: 'footer', variant: 'simple' })\n  return { sections }\n}\n\nexport function tokensForStyle(styleKey: StyleKey): TailwindStyleTokens {\n  switch (styleKey) {\n    case 'minimalist_tech':\n      return {\n        fontHeading: 'var(--font-space)',\n        fontBody: 'var(--font-inter)',\n        bg: 'bg-gradient-to-b from-slate-950 via-slate-950 to-black',\n        card: 'bg-white/5 backdrop-blur border border-white/10 shadow-[0_20px_60px_rgba(0,0,0,0.35)]',\n        text: 'text-white',\n        muted: 'text-white/70',\n        border: 'border-white/10',\n        accent: 'bg-sky-400',\n        accentText: 'text-slate-950',\n        accentRing: 'ring-2 ring-sky-400/40',\n        radiusCard: 'rounded-3xl',\n        radiusCardSm: 'rounded-2xl',\n        radiusButton: 'rounded-xl',\n        radiusPill: 'rounded-full',\n        heroPadding: 'px-4 pt-14 pb-10',\n        sectionPadding: 'px-4 py-10',\n      }\n    case 'bold_modern':\n      return {\n        fontHeading: 'var(--font-syne)',\n        fontBody: 'var(--font-inter)',\n        bg: 'bg-gradient-to-b from-black via-zinc-950 to-slate-900',\n        card: 'bg-white/5 border border-white/10 shadow-[0_25px_70px_rgba(0,0,0,0.5)]',\n        text: 'text-white',\n        muted: 'text-white/70',\n        border: 'border-white/10',\n        accent: 'bg-fuchsia-500',\n        accentText: 'text-white',\n        accentRing: 'ring-2 ring-fuchsia-500/40',\n        radiusCard: 'rounded-[28px]',\n        radiusCardSm: 'rounded-2xl',\n        radiusButton: 'rounded-2xl',\n        radiusPill: 'rounded-full',\n        heroPadding: 'px-4 pt-16 pb-10',\n        sectionPadding: 'px-4 py-10',\n      }\n    case 'clean_corporate':\n      return {\n        fontHeading: 'var(--font-manrope)',\n        fontBody: 'var(--font-inter)',\n        bg: 'bg-gradient-to-b from-slate-50 to-white',\n        card: 'bg-white border border-slate-200 shadow-[0_8px_24px_rgba(15,23,42,0.08)]',\n        text: 'text-slate-900',\n        muted: 'text-slate-600',\n        border: 'border-slate-200',\n        accent: 'bg-blue-600',\n        accentText: 'text-white',\n        accentRing: 'ring-2 ring-blue-500/30',\n        radiusCard: 'rounded-3xl',\n        radiusCardSm: 'rounded-xl',\n        radiusButton: 'rounded-xl',\n        radiusPill: 'rounded-full',\n        heroPadding: 'px-4 pt-14 pb-10',\n        sectionPadding: 'px-4 py-10',\n      }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/lib/siteManifest.ts"],"sourcesContent":["import { z } from 'zod'\n\n/**\n * SiteManifest - High-level design specification\n * This is the \"blueprint\" that the Renderer interprets to build pixel-perfect landing pages\n */\n\nexport const ThemeKeySchema = z.enum(['ios_spatial', 'saas_dark', 'minimal_zen'])\nexport type ThemeKey = z.infer<typeof ThemeKeySchema>\n\nexport const LayoutTypeSchema = z.enum(['bento', 'standard', 'magazine', 'split'])\nexport type LayoutType = z.infer<typeof LayoutTypeSchema>\n\n// Atomic component variants\nexport const HeroVariantSchema = z.enum(['centered', 'split', 'minimal', 'video'])\nexport const FeatureVariantSchema = z.enum(['grid', 'zigzag', 'bento', 'list'])\nexport const PricingVariantSchema = z.enum(['cards', 'table', 'compare', 'tiered'])\nexport const TestimonialVariantSchema = z.enum(['quotes', 'cards', 'marquee', 'grid'])\nexport const FAQVariantSchema = z.enum(['accordion', 'cards', 'minimal'])\n\n// Content schemas\nexport const HeroContentSchema = z.object({\n  badge: z.string().optional(),\n  headline: z.string(),\n  subheadline: z.string(),\n  cta: z.object({\n    primary: z.string(),\n    secondary: z.string().optional(),\n    href: z.string(),\n  }),\n  visual: z\n    .object({\n      type: z.enum(['icon', 'svg', 'gradient', 'image']),\n      value: z.string(), // icon name, SVG string, gradient config, or image URL\n    })\n    .optional(),\n})\n\nexport const SocialProofSchema = z.object({\n  title: z.string().optional(),\n  items: z.array(\n    z.object({\n      label: z.string(),\n      value: z.string(),\n      icon: z.string().optional(), // lucide-react icon name\n    })\n  ),\n})\n\nexport const FeatureItemSchema = z.object({\n  title: z.string(),\n  description: z.string(),\n  icon: z.string().optional(), // lucide-react icon name\n  highlight: z.boolean().optional(),\n})\n\nexport const FeaturesContentSchema = z.object({\n  title: z.string(),\n  items: z.array(FeatureItemSchema),\n})\n\nexport const PricingPlanSchema = z.object({\n  name: z.string(),\n  price: z.string(),\n  period: z.string().optional(), // \"/month\", \"/year\", etc.\n  description: z.string().optional(),\n  bullets: z.array(z.string()),\n  highlighted: z.boolean().optional(),\n  cta: z.string().optional(),\n})\n\nexport const PricingContentSchema = z.object({\n  title: z.string(),\n  plans: z.array(PricingPlanSchema),\n})\n\nexport const TestimonialSchema = z.object({\n  name: z.string(),\n  role: z.string(),\n  quote: z.string(),\n  avatar: z.string().optional(),\n  rating: z.number().min(0).max(5).optional(),\n})\n\nexport const TestimonialsContentSchema = z.object({\n  title: z.string(),\n  items: z.array(TestimonialSchema),\n})\n\nexport const FAQItemSchema = z.object({\n  q: z.string(),\n  a: z.string(),\n})\n\nexport const FAQContentSchema = z.object({\n  title: z.string(),\n  items: z.array(FAQItemSchema),\n})\n\nexport const FooterContentSchema = z.object({\n  note: z.string().optional(),\n  links: z\n    .array(\n      z.object({\n        label: z.string(),\n        href: z.string(),\n      })\n    )\n    .optional(),\n})\n\n// Section definition\nexport const SectionSchema = z.object({\n  id: z.string(),\n  type: z.enum(['hero', 'socialProof', 'features', 'pricing', 'testimonials', 'faq', 'footer']),\n  variant: z.union([HeroVariantSchema, FeatureVariantSchema, PricingVariantSchema, TestimonialVariantSchema, FAQVariantSchema]).optional(),\n  anchor: z.string().optional(),\n  order: z.number(),\n})\n\n// SiteManifest - the complete blueprint\nexport const SiteManifestSchema = z.object({\n  version: z.literal(2), // v2 = new architecture\n  theme: ThemeKeySchema,\n  layout: LayoutTypeSchema,\n  sections: z.array(SectionSchema),\n  content: z.object({\n    hero: HeroContentSchema,\n    socialProof: SocialProofSchema.optional(),\n    features: FeaturesContentSchema.optional(),\n    pricing: PricingContentSchema.optional(),\n    testimonials: TestimonialsContentSchema.optional(),\n    faq: FAQContentSchema.optional(),\n    footer: FooterContentSchema.optional(),\n  }),\n  meta: z.object({\n    businessName: z.string(),\n    language: z.string().default('KZ'),\n    colorPreference: z.string().optional(),\n    themeId: z.string().optional(), // Theme preset ID (cosmic_void, sunset_blaze, etc.)\n    themePreset: z\n      .object({\n        id: z.string(),\n        primary: z.string(), // Tailwind gradient classes\n        glow: z.string(),\n        bgMesh: z.string(),\n      })\n      .optional(),\n  }),\n})\n\nexport type SiteManifest = z.infer<typeof SiteManifestSchema>\nexport type HeroContent = z.infer<typeof HeroContentSchema>\nexport type SocialProof = z.infer<typeof SocialProofSchema>\nexport type FeaturesContent = z.infer<typeof FeaturesContentSchema>\nexport type PricingContent = z.infer<typeof PricingContentSchema>\nexport type TestimonialsContent = z.infer<typeof TestimonialsContentSchema>\nexport type FAQContent = z.infer<typeof FAQContentSchema>\nexport type FooterContent = z.infer<typeof FooterContentSchema>\nexport type Section = z.infer<typeof SectionSchema>\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/lib/styleProcessor.ts"],"sourcesContent":["import type { ThemeKey } from './siteManifest'\n\n/**\n * Style Processor - Maps theme keys to Tailwind token classes\n * Provides consistent design system tokens for each theme\n */\n\nexport interface ThemeTokens {\n  // Typography\n  fontHeading: string\n  fontHeadingPremium: string // Premium heading font (Outfit/Sora)\n  fontBody: string\n  fontMono: string\n\n  // Backgrounds\n  bg: string\n  bgGradient: string\n  surface: string\n  surfaceHover: string\n\n  // Text colors\n  text: string\n  textMuted: string\n  textInverse: string\n\n  // Borders\n  border: string\n  borderHover: string\n\n  // Accents\n  accent: string\n  accentText: string\n  accentHover: string\n  accentRing: string\n\n  // Radius\n  radiusCard: string\n  radiusCardSm: string\n  radiusButton: string\n  radiusPill: string\n\n  // Spacing\n  heroPadding: string\n  sectionPadding: string\n\n  // Effects\n  shadow: string\n  shadowGlass: string\n  backdropBlur: string\n\n  // Special effects\n  glow: string\n  maskFade: string\n}\n\nexport function getThemeTokens(theme: ThemeKey): ThemeTokens {\n  switch (theme) {\n    case 'ios_spatial':\n      return {\n        fontHeading: 'var(--font-space)',\n        fontHeadingPremium: 'var(--font-outfit)',\n        fontBody: 'var(--font-geist-sans)',\n        fontMono: 'var(--font-geist-mono)',\n        bg: 'bg-[#050505]',\n        bgGradient: 'bg-gradient-to-br from-indigo-950/20 via-purple-950/30 to-violet-950/20',\n        surface: 'bg-white/5 backdrop-blur-xl border border-white/10',\n        surfaceHover: 'bg-white/10 backdrop-blur-xl border border-white/20',\n        text: 'text-white',\n        textMuted: 'text-white/70',\n        textInverse: 'text-slate-950',\n        border: 'border-white/20',\n        borderHover: 'border-white/30',\n        accent: 'bg-sky-400',\n        accentText: 'text-slate-950',\n        accentHover: 'bg-sky-300',\n        accentRing: 'ring-2 ring-sky-400/40',\n        radiusCard: 'rounded-3xl',\n        radiusCardSm: 'rounded-2xl',\n        radiusButton: 'rounded-2xl',\n        radiusPill: 'rounded-full',\n        heroPadding: 'px-4 pt-20 pb-16 sm:px-6 lg:px-8',\n        sectionPadding: 'px-4 py-16 sm:px-6 lg:px-8 lg:py-24',\n        shadow: 'shadow-[0_20px_60px_rgba(0,0,0,0.5)]',\n        shadowGlass: 'shadow-[0_8px_32px_rgba(0,0,0,0.4)] backdrop-blur-xl',\n        backdropBlur: 'backdrop-blur-xl',\n        glow: 'shadow-[0_0_40px_rgba(56,189,248,0.3)]',\n        maskFade: 'mask-image: linear-gradient(to bottom, black 80%, transparent 100%)',\n      }\n\n    case 'saas_dark':\n      return {\n        fontHeading: 'var(--font-syne)',\n        fontHeadingPremium: 'var(--font-sora)',\n        fontBody: 'var(--font-geist-sans)',\n        fontMono: 'var(--font-geist-mono)',\n        bg: 'bg-[#050505]',\n        bgGradient: 'bg-gradient-to-br from-indigo-950/30 via-purple-950/40 to-violet-950/30',\n        surface: 'bg-white/5 backdrop-blur-xl border border-white/10',\n        surfaceHover: 'bg-white/10 backdrop-blur-xl border border-white/20',\n        text: 'text-slate-100',\n        textMuted: 'text-slate-400',\n        textInverse: 'text-white',\n        border: 'border-slate-800',\n        borderHover: 'border-slate-700',\n        accent: 'bg-purple-500',\n        accentText: 'text-white',\n        accentHover: 'bg-purple-600',\n        accentRing: 'ring-2 ring-purple-500/40',\n        radiusCard: 'rounded-2xl',\n        radiusCardSm: 'rounded-xl',\n        radiusButton: 'rounded-xl',\n        radiusPill: 'rounded-full',\n        heroPadding: 'px-4 pt-20 pb-16 sm:px-6 lg:px-8',\n        sectionPadding: 'px-4 py-16 sm:px-6 lg:px-8 lg:py-24',\n        shadow: 'shadow-[0_25px_70px_rgba(0,0,0,0.6)]',\n        shadowGlass: 'shadow-[0_8px_32px_rgba(0,0,0,0.5)] backdrop-blur-xl',\n        backdropBlur: 'backdrop-blur-xl',\n        glow: 'shadow-[0_0_40px_rgba(168,85,247,0.4)]',\n        maskFade: 'mask-image: linear-gradient(to bottom, black 85%, transparent 100%)',\n      }\n\n    case 'minimal_zen':\n      return {\n        fontHeading: 'var(--font-manrope)',\n        fontHeadingPremium: 'var(--font-outfit)',\n        fontBody: 'var(--font-geist-sans)',\n        fontMono: 'var(--font-geist-mono)',\n        bg: 'bg-gradient-to-b from-slate-50 to-white',\n        bgGradient: 'bg-gradient-to-br from-slate-50 via-white to-slate-50',\n        surface: 'bg-white border border-slate-200',\n        surfaceHover: 'bg-slate-50 border border-slate-300',\n        text: 'text-slate-900',\n        textMuted: 'text-slate-600',\n        textInverse: 'text-white',\n        border: 'border-slate-200',\n        borderHover: 'border-slate-300',\n        accent: 'bg-blue-600',\n        accentText: 'text-white',\n        accentHover: 'bg-blue-700',\n        accentRing: 'ring-2 ring-blue-500/30',\n        radiusCard: 'rounded-2xl',\n        radiusCardSm: 'rounded-xl',\n        radiusButton: 'rounded-xl',\n        radiusPill: 'rounded-full',\n        heroPadding: 'px-4 pt-20 pb-16 sm:px-6 lg:px-8 max-w-4xl mx-auto',\n        sectionPadding: 'px-4 py-16 sm:px-6 lg:px-8 lg:py-24 max-w-4xl mx-auto',\n        shadow: 'shadow-[0_8px_24px_rgba(15,23,42,0.08)]',\n        shadowGlass: 'shadow-[0_4px_16px_rgba(15,23,42,0.06)]',\n        backdropBlur: 'backdrop-blur-sm',\n        glow: 'shadow-[0_0_30px_rgba(37,99,235,0.2)]',\n        maskFade: 'mask-image: linear-gradient(to bottom, black 90%, transparent 100%)',\n      }\n  }\n}\n\n/**\n * Map legacy styleKey to new theme\n */\nexport function styleKeyToTheme(styleKey: 'minimalist_tech' | 'bold_modern' | 'clean_corporate'): ThemeKey {\n  switch (styleKey) {\n    case 'minimalist_tech':\n      return 'saas_dark'\n    case 'bold_modern':\n      return 'ios_spatial'\n    case 'clean_corporate':\n      return 'minimal_zen'\n  }\n}\n"],"names":[],"mappings":";;;;;;AAuDO,SAAS,eAAe,KAAe;IAC5C,OAAQ;QACN,KAAK;YACH,OAAO;gBACL,aAAa;gBACb,oBAAoB;gBACpB,UAAU;gBACV,UAAU;gBACV,IAAI;gBACJ,YAAY;gBACZ,SAAS;gBACT,cAAc;gBACd,MAAM;gBACN,WAAW;gBACX,aAAa;gBACb,QAAQ;gBACR,aAAa;gBACb,QAAQ;gBACR,YAAY;gBACZ,aAAa;gBACb,YAAY;gBACZ,YAAY;gBACZ,cAAc;gBACd,cAAc;gBACd,YAAY;gBACZ,aAAa;gBACb,gBAAgB;gBAChB,QAAQ;gBACR,aAAa;gBACb,cAAc;gBACd,MAAM;gBACN,UAAU;YACZ;QAEF,KAAK;YACH,OAAO;gBACL,aAAa;gBACb,oBAAoB;gBACpB,UAAU;gBACV,UAAU;gBACV,IAAI;gBACJ,YAAY;gBACZ,SAAS;gBACT,cAAc;gBACd,MAAM;gBACN,WAAW;gBACX,aAAa;gBACb,QAAQ;gBACR,aAAa;gBACb,QAAQ;gBACR,YAAY;gBACZ,aAAa;gBACb,YAAY;gBACZ,YAAY;gBACZ,cAAc;gBACd,cAAc;gBACd,YAAY;gBACZ,aAAa;gBACb,gBAAgB;gBAChB,QAAQ;gBACR,aAAa;gBACb,cAAc;gBACd,MAAM;gBACN,UAAU;YACZ;QAEF,KAAK;YACH,OAAO;gBACL,aAAa;gBACb,oBAAoB;gBACpB,UAAU;gBACV,UAAU;gBACV,IAAI;gBACJ,YAAY;gBACZ,SAAS;gBACT,cAAc;gBACd,MAAM;gBACN,WAAW;gBACX,aAAa;gBACb,QAAQ;gBACR,aAAa;gBACb,QAAQ;gBACR,YAAY;gBACZ,aAAa;gBACb,YAAY;gBACZ,YAAY;gBACZ,cAAc;gBACd,cAAc;gBACd,YAAY;gBACZ,aAAa;gBACb,gBAAgB;gBAChB,QAAQ;gBACR,aAAa;gBACb,cAAc;gBACd,MAAM;gBACN,UAAU;YACZ;IACJ;AACF;AAKO,SAAS,gBAAgB,QAA+D;IAC7F,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF"}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/lib/chatToManifest.ts"],"sourcesContent":["import type { SiteBrief } from './siteConfig'\nimport type { SiteManifest, ThemeKey, Section } from './siteManifest'\nimport { styleKeyToTheme } from './styleProcessor'\n\n/**\n * Chat-to-Manifest Bridge\n * Extracts 5 key data points from user brief and structures them for SiteManifest generation\n */\n\nexport interface BriefDataPoints {\n  valueProp: string // Main value proposition (headline/subheadline)\n  visualVibe: ThemeKey // Mapped from styleKey\n  targetAudience: string // From brief\n  ctaGoal: string // From brief.cta\n  colorPreference: string // Inferred or from brief\n}\n\n/**\n * Parse brief and extract 5 key data points\n */\nexport function parseBriefToManifest(\n  brief: SiteBrief,\n  styleKey: 'minimalist_tech' | 'bold_modern' | 'clean_corporate'\n): BriefDataPoints {\n  // 1. Value Prop - combine business name and USP\n  const valueProp = `${brief.businessName}: ${brief.uniqueSellingPoints.join(', ')}`\n\n  // 2. Visual Vibe - map styleKey to theme\n  const visualVibe = styleKeyToTheme(styleKey)\n\n  // 3. Target Audience - from brief\n  const targetAudience = brief.targetAudience\n\n  // 4. CTA Goal - from brief.cta\n  const ctaGoal = brief.cta.label\n\n  // 5. Color Preference - infer from styleKey\n  const colorPreference = inferColorPreference(styleKey)\n\n  return {\n    valueProp,\n    visualVibe,\n    targetAudience,\n    ctaGoal,\n    colorPreference,\n  }\n}\n\n/**\n * Infer color preference from styleKey\n */\nfunction inferColorPreference(styleKey: string): string {\n  switch (styleKey) {\n    case 'minimalist_tech':\n      return 'dark, purple accents'\n    case 'bold_modern':\n      return 'dark, vibrant colors (sky, fuchsia)'\n    case 'clean_corporate':\n      return 'light, blue accents'\n    default:\n      return 'neutral, professional'\n  }\n}\n\n/**\n * Generate default sections for SiteManifest\n */\nexport function generateDefaultSections(hasSocialProof: boolean, hasTestimonials: boolean, hasFaq: boolean): Section[] {\n  const sections: Section[] = [\n    { id: 'hero-1', type: 'hero', variant: 'centered', anchor: 'top', order: 1 },\n  ]\n\n  if (hasSocialProof) {\n    sections.push({ id: 'social-1', type: 'socialProof', anchor: 'social', order: 2, variant: undefined })\n  }\n\n  sections.push({ id: 'features-1', type: 'features', variant: 'grid', anchor: 'features', order: 3 })\n  sections.push({ id: 'pricing-1', type: 'pricing', variant: 'cards', anchor: 'pricing', order: 4 })\n\n  if (hasTestimonials) {\n    sections.push({ id: 'testimonials-1', type: 'testimonials', variant: 'quotes', anchor: 'testimonials', order: 5 })\n  }\n\n  if (hasFaq) {\n    sections.push({ id: 'faq-1', type: 'faq', variant: 'accordion', anchor: 'faq', order: 6 })\n  }\n\n  sections.push({ id: 'footer-1', type: 'footer', order: 7, variant: undefined })\n\n  return sections\n}\n\n/**\n * AIDA Framework helper\n * Structures content generation prompts using AIDA (Attention, Interest, Desire, Action)\n */\nexport function getAIDAPrompt(dataPoints: BriefDataPoints): string {\n  return `\nGenerate landing page content using AIDA framework:\n\nATTENTION (Hero):\n- Headline: Powerful, benefit-focused, 6-12 words\n- Subheadline: Clear value proposition, 15-25 words\n- Badge: Short, punchy tagline\n\nINTEREST (Features):\n- 3-6 feature items\n- Each: title (3-6 words), description (10-20 words)\n- Focus on benefits, not features\n\nDESIRE (Social Proof, Testimonials):\n- Stats/metrics: 2-4 items with impressive numbers\n- Testimonials: 2-4 authentic quotes with specific results\n\nACTION (Pricing, CTA):\n- Pricing: 2-3 plans with clear value\n- CTA: Action-oriented, creates urgency\n\nContext:\n- Business: ${dataPoints.valueProp}\n- Audience: ${dataPoints.targetAudience}\n- Theme: ${dataPoints.visualVibe}\n- Colors: ${dataPoints.colorPreference}\n`\n}\n"],"names":[],"mappings":";;;;;;;;AAEA;;AAkBO,SAAS,qBACd,KAAgB,EAChB,QAA+D;IAE/D,gDAAgD;IAChD,MAAM,YAAY,GAAG,MAAM,YAAY,CAAC,EAAE,EAAE,MAAM,mBAAmB,CAAC,IAAI,CAAC,OAAO;IAElF,yCAAyC;IACzC,MAAM,aAAa,IAAA,iJAAe,EAAC;IAEnC,kCAAkC;IAClC,MAAM,iBAAiB,MAAM,cAAc;IAE3C,+BAA+B;IAC/B,MAAM,UAAU,MAAM,GAAG,CAAC,KAAK;IAE/B,4CAA4C;IAC5C,MAAM,kBAAkB,qBAAqB;IAE7C,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF;AAEA;;CAEC,GACD,SAAS,qBAAqB,QAAgB;IAC5C,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAKO,SAAS,wBAAwB,cAAuB,EAAE,eAAwB,EAAE,MAAe;IACxG,MAAM,WAAsB;QAC1B;YAAE,IAAI;YAAU,MAAM;YAAQ,SAAS;YAAY,QAAQ;YAAO,OAAO;QAAE;KAC5E;IAED,IAAI,gBAAgB;QAClB,SAAS,IAAI,CAAC;YAAE,IAAI;YAAY,MAAM;YAAe,QAAQ;YAAU,OAAO;YAAG,SAAS;QAAU;IACtG;IAEA,SAAS,IAAI,CAAC;QAAE,IAAI;QAAc,MAAM;QAAY,SAAS;QAAQ,QAAQ;QAAY,OAAO;IAAE;IAClG,SAAS,IAAI,CAAC;QAAE,IAAI;QAAa,MAAM;QAAW,SAAS;QAAS,QAAQ;QAAW,OAAO;IAAE;IAEhG,IAAI,iBAAiB;QACnB,SAAS,IAAI,CAAC;YAAE,IAAI;YAAkB,MAAM;YAAgB,SAAS;YAAU,QAAQ;YAAgB,OAAO;QAAE;IAClH;IAEA,IAAI,QAAQ;QACV,SAAS,IAAI,CAAC;YAAE,IAAI;YAAS,MAAM;YAAO,SAAS;YAAa,QAAQ;YAAO,OAAO;QAAE;IAC1F;IAEA,SAAS,IAAI,CAAC;QAAE,IAAI;QAAY,MAAM;QAAU,OAAO;QAAG,SAAS;IAAU;IAE7E,OAAO;AACT;AAMO,SAAS,cAAc,UAA2B;IACvD,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;YAsBE,EAAE,WAAW,SAAS,CAAC;YACvB,EAAE,WAAW,cAAc,CAAC;SAC/B,EAAE,WAAW,UAAU,CAAC;UACvB,EAAE,WAAW,eAAe,CAAC;AACvC,CAAC;AACD"}},
    {"offset": {"line": 868, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nexport function supabaseBrowser() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n  if (!url || !anon) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY')\n  return createClient(url, anon)\n}\n\nexport function supabaseServer() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const service = process.env.SUPABASE_SERVICE_ROLE_KEY\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\n  if (!url) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL')\n\n  // Prefer service role for server-side writes. Fallback to anon for quick demo.\n  const key = service || anon\n  if (!key) throw new Error('Missing SUPABASE_SERVICE_ROLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY')\n\n  return createClient(url, key, {\n    auth: { persistSession: false },\n  })\n}\n\nexport function supabaseService() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const service = process.env.SUPABASE_SERVICE_ROLE_KEY\n  if (!url || !service) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL / SUPABASE_SERVICE_ROLE_KEY')\n  return createClient(url, service, { auth: { persistSession: false } })\n}\n\nexport function supabaseServerWithAccessToken(accessToken: string) {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n  if (!url || !anon) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY')\n  if (!accessToken) throw new Error('Missing access token')\n\n  // Use anon key + user JWT so RLS applies server-side.\n  return createClient(url, anon, {\n    auth: { persistSession: false },\n    global: {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,SAAS;IACd,MAAM;IACN,MAAM;IACN;;IACA,OAAO,IAAA,gMAAY,EAAC,KAAK;AAC3B;AAEO,SAAS;IACd,MAAM;IACN,MAAM,UAAU,QAAQ,GAAG,CAAC,yBAAyB;IACrD,MAAM;IAEN;;IAEA,+EAA+E;IAC/E,MAAM,MAAM,WAAW;IACvB;;IAEA,OAAO,IAAA,gMAAY,EAAC,KAAK,KAAK;QAC5B,MAAM;YAAE,gBAAgB;QAAM;IAChC;AACF;AAEO,SAAS;IACd,MAAM;IACN,MAAM,UAAU,QAAQ,GAAG,CAAC,yBAAyB;IACrD,IAAI,CAAC,OAAO,CAAC,SAAS,MAAM,IAAI,MAAM;IACtC,OAAO,IAAA,gMAAY,EAAC,KAAK,SAAS;QAAE,MAAM;YAAE,gBAAgB;QAAM;IAAE;AACtE;AAEO,SAAS,8BAA8B,WAAmB;IAC/D,MAAM;IACN,MAAM;IACN;;IACA,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;IAElC,sDAAsD;IACtD,OAAO,IAAA,gMAAY,EAAC,KAAK,MAAM;QAC7B,MAAM;YAAE,gBAAgB;QAAM;QAC9B,QAAQ;YACN,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,aAAa;YACxC;QACF;IACF;AACF"}},
    {"offset": {"line": 935, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/app/api/funnel/generate/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { GoogleGenerativeAI } from '@google/generative-ai'\nimport { BrandTokensSchema, FreeformHtmlSchema, LandingContentSchema, SiteBriefSchema, SiteConfigSchema, SiteLayoutSchema, defaultLayoutForContent, tokensForStyle, StyleKey } from '@/lib/siteConfig'\nimport { SiteManifestSchema, HeroContentSchema, SocialProofSchema, FeaturesContentSchema, PricingContentSchema, TestimonialsContentSchema, FAQContentSchema, FooterContentSchema } from '@/lib/siteManifest'\nimport { parseBriefToManifest, getAIDAPrompt, generateDefaultSections } from '@/lib/chatToManifest'\nimport { styleKeyToTheme } from '@/lib/styleProcessor'\nimport { supabaseService } from '@/lib/supabase'\n\nexport const runtime = 'nodejs'\n\n// Basic HTML sanitization (remove dangerous tags/attributes)\nfunction sanitizeHtml(html: string): string {\n  // Remove script tags and event handlers\n  let sanitized = html\n    .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n    .replace(/on\\w+\\s*=\\s*[\"'][^\"']*[\"']/gi, '')\n    .replace(/javascript:/gi, '')\n    .replace(/<iframe/gi, '<iframe sandbox=\"allow-same-origin allow-scripts\"')\n  return sanitized\n}\n\n// Sanitize JS (remove eval, Function, etc.)\nfunction sanitizeJs(js: string): string {\n  return js\n    .replace(/\\beval\\s*\\(/gi, '/* eval removed */')\n    .replace(/\\bFunction\\s*\\(/gi, '/* Function removed */')\n    .replace(/\\bnew\\s+Function\\s*\\(/gi, '/* new Function removed */')\n    .replace(/document\\.write/gi, '/* document.write removed */')\n    .replace(/innerHTML\\s*=/gi, '/* innerHTML removed */')\n}\n\nexport async function POST(req: Request) {\n  try {\n    const apiKey = process.env.GEMINI_API_KEY\n    if (!apiKey) return NextResponse.json({ error: 'Missing GEMINI_API_KEY' }, { status: 400 })\n\n    let body: any = null\n    try {\n      body = await req.json()\n    } catch {\n      body = null\n    }\n\n    const leadId = String(body?.leadId || '')\n    const styleKeyRaw = String(body?.styleKey || '')\n    const briefRaw = body?.brief\n    const useFreeform = Boolean(body?.freeform) // Free-form HTML/CSS mode (Cursor-like)\n    const useV2 = Boolean(body?.v2) // Use new SiteManifest v2 architecture\n    const themeId = String(body?.themeId || '') // Theme preset ID\n    if (!leadId) return NextResponse.json({ error: 'leadId required' }, { status: 400 })\n\n    const briefParsed = SiteBriefSchema.safeParse(briefRaw)\n    if (!briefParsed.success) return NextResponse.json({ error: 'Invalid brief' }, { status: 400 })\n\n    const styleParsed = StyleKey.safeParse(styleKeyRaw)\n    if (!styleParsed.success) return NextResponse.json({ error: 'Invalid styleKey' }, { status: 400 })\n\n    const brief = briefParsed.data\n    const styleKey = styleParsed.data as StyleKey\n\n    const genAI = new GoogleGenerativeAI(apiKey)\n    // Use Gemini 3 Pro for high-quality design generation\n    const modelName = (process.env.GEMINI_MODEL || 'models/gemini-3.0-pro').trim()\n    const modelFallbacks = [\n      modelName,\n      'models/gemini-3.0-pro',\n      'models/gemini-2.5-pro',\n      'models/gemini-2.5-flash',\n      'models/gemini-2.0-flash',\n    ]\n\n    function safeJsonParse(text: string) {\n      try {\n        return JSON.parse(text)\n      } catch {\n        const start = text.indexOf('{')\n        const end = text.lastIndexOf('}')\n        if (start >= 0 && end > start) {\n          try {\n            return JSON.parse(text.slice(start, end + 1))\n          } catch {\n            return null\n          }\n        }\n        return null\n      }\n    }\n\n    async function genJson(instruction: string, temperature: number) {\n      let lastErr: any = null\n      let lastRaw = ''\n      for (const m of modelFallbacks) {\n        try {\n          const model = genAI.getGenerativeModel({\n            model: m,\n            generationConfig: { temperature, responseMimeType: 'application/json' },\n          })\n          const res = await model.generateContent(instruction)\n          const text = res.response.text() || '{}'\n          const parsed = safeJsonParse(text)\n          if (parsed) return { json: parsed, raw: text, model: m }\n          lastRaw = text\n        } catch (e: any) {\n          lastErr = e\n        }\n\n        try {\n          const model = genAI.getGenerativeModel({ model: m, generationConfig: { temperature } })\n          const res = await model.generateContent(instruction)\n          const text = res.response.text() || '{}'\n          const parsed = safeJsonParse(text)\n          if (parsed) return { json: parsed, raw: text, model: m }\n          lastRaw = text\n        } catch (e: any) {\n          lastErr = e\n        }\n      }\n      const err = lastErr || new Error('Gemini failed')\n      ;(err as any).rawPreview = lastRaw.slice(0, 500)\n      throw err\n    }\n\n    // 1) content\n    let content: any = null\n    const fallbackContent = {\n      hero: {\n        badge: `${brief.businessName} • Premium`,\n        headline: `${brief.businessName} үшін жаңа деңгей`,\n        subheadline: `${brief.targetAudience || 'Клиенттер'} үшін ${brief.services.join(\n          ', '\n        )} бағытында нақты нәтиже беретін премиум шешім.`,\n      },\n      features: {\n        title: 'Негізгі артықшылықтар',\n        items: (brief.uniqueSellingPoints?.length ? brief.uniqueSellingPoints : brief.services)\n          .slice(0, 4)\n          .map((text: string) => ({\n            title: text,\n            description: `${text} арқылы тиімділік пен сапаны айқын арттырасыз.`,\n          })),\n      },\n      pricing: {\n        title: 'Бағалар',\n        plans: [\n          {\n            name: 'Start',\n            price: '₸49,000',\n            description: 'Шағын бизнеске арналған',\n            bullets: ['Жылдам іске қосу', 'Премиум дизайн', 'Техқолдау'],\n            highlighted: false,\n          },\n          {\n            name: 'Pro',\n            price: '₸99,000',\n            description: 'Өсуге арналған толық пакет',\n            bullets: ['AI контент', 'Конверсия фокус', 'Жеке менеджер'],\n            highlighted: true,\n          },\n        ],\n      },\n      testimonials: {\n        title: 'Клиенттер айтады',\n        items: [\n          { name: 'Айгерім', role: 'Founder', quote: 'Нәтиже нақты, сатылым 2 есе өсті.' },\n          { name: 'Ернар', role: 'CEO', quote: '1 аптада сапалы лендинг дайын болды.' },\n        ],\n      },\n      faq: {\n        title: 'Жиі сұрақтар',\n        items: [\n          { q: 'Қанша уақытта дайын?', a: 'Әдетте 2-3 күн ішінде дайын болады.' },\n          { q: 'Контентті өзім беремін бе?', a: 'Брифке сүйене отырып толық контент жазамыз.' },\n        ],\n      },\n      footer: {\n        note: `${brief.businessName} — сенімді шешім.`,\n      },\n    }\n\n    try {\n    const contentPrompt =\n      'Generate PREMIUM, compelling landing page content in Kazakh (KZ) that converts. Return JSON only.\\n' +\n      'Shape: { \"hero\": { \"badge\": string (short, punchy), \"headline\": string (powerful, benefit-focused, 6-12 words), \"subheadline\": string (clear value prop, 15-25 words) }, ' +\n      '\"stats\"?: { \"title\": string, \"items\": [{ \"label\": string, \"value\": string }] }, ' +\n      '\"features\": { \"title\": string, \"items\": [{ \"title\": string (benefit-focused, 3-6 words), \"description\": string (clear, 10-20 words) }] }, ' +\n      '\"testimonials\"?: { \"title\": string, \"items\": [{ \"name\": string, \"role\": string, \"quote\": string (authentic, specific, 15-30 words) }] }, ' +\n      '\"faq\"?: { \"title\": string, \"items\": [{ \"q\": string (common concern), \"a\": string (helpful, 20-40 words) }] }, ' +\n      '\"pricing\": { \"title\": string, \"plans\": [{ \"name\": string, \"price\": string, \"description\": string (clear value), \"bullets\": [string] (benefits, not features), \"highlighted\": boolean }] }, ' +\n      '\"finalCta\"?: { \"title\": string (action-oriented), \"subtitle\": string (urgency/benefit) }, ' +\n      '\"footer\": { \"note\": string } }.\\n' +\n      '\\n' +\n      'CONTENT QUALITY RULES:\\n' +\n      '1. Headlines: Benefit-focused, specific, emotional. Avoid generic phrases. Use power words.\\n' +\n      '2. Subheadlines: Clear value proposition, address pain point, create desire.\\n' +\n      '3. Features: Focus on benefits, not features. Use \"you\" language. Be specific.\\n' +\n      '4. Testimonials: Authentic, specific results. Include numbers/metrics if possible.\\n' +\n      '5. FAQ: Address real objections, be helpful, build trust.\\n' +\n      '6. Pricing: Clear value, highlight best option, use social proof.\\n' +\n      '7. CTA: Action-oriented, create urgency, clear next step.\\n' +\n      '8. Tone: Match styleKey (minimalist_tech = professional/tech, bold_modern = energetic/bold, clean_corporate = trustworthy/calm).\\n' +\n      '\\n' +\n      `Brief: ${JSON.stringify(brief)}\\n` +\n      `Style: ${styleKey}\\n` +\n      'Constraints: stats.items 2-4; features.items 3-6; testimonials.items 2-4; faq.items 3-6; pricing.plans 2-3; bullets 3-6.\\n' +\n      '\\n' +\n      'OUTPUT: Return content that converts. Every word must earn its place. Be specific, benefit-focused, and compelling.\\n'\n    const out = await genJson(contentPrompt, 0.6)\n    const parsed = LandingContentSchema.safeParse(out.json)\n    if (parsed.success) content = parsed.data\n    else content = fallbackContent\n    } catch {\n      content = fallbackContent\n    }\n    if (!content) content = fallbackContent\n\n    // 1.5) brand tokens (individual design kit with iOS 26-style palette + dark/light mode)\n    let brand: any = null\n    try {\n    const iosColors = [\n      { name: 'blue', light: '#007AFF', dark: '#0A84FF' },\n      { name: 'green', light: '#34C759', dark: '#30D158' },\n      { name: 'orange', light: '#FF9500', dark: '#FF9F0A' },\n      { name: 'red', light: '#FF3B30', dark: '#FF453A' },\n      { name: 'purple', light: '#AF52DE', dark: '#BF5AF2' },\n      { name: 'pink', light: '#FF2D55', dark: '#FF375F' },\n      { name: 'indigo', light: '#5856D6', dark: '#5E5CE6' },\n      { name: 'teal', light: '#5AC8FA', dark: '#64D2FF' },\n      { name: 'mint', light: '#00C7BE', dark: '#66EFE5' },\n    ]\n    const brandPrompt =\n      'Create a PREMIUM brand design system in iOS 26 style with perfect typography pairing. Return JSON only.\\n' +\n      'Shape: { \"brandName\": string, \"colors\": { \"light\": { \"bg\": hex, \"surface\": hex, \"text\": hex, \"muted\": hex, \"border\": hex, \"primary\": hex, \"primaryText\": hex, \"accent\": hex, \"secondary\"?: hex }, ' +\n      '\"dark\": { \"bg\": hex, \"surface\": hex, \"text\": hex, \"muted\": hex, \"border\": hex, \"primary\": hex, \"primaryText\": hex, \"accent\": hex, \"secondary\"?: hex } }, ' +\n      '\"typography\": { \"heading\": \"space\"|\"syne\"|\"manrope\", \"body\": \"inter\"|\"manrope\" }, ' +\n      '\"radius\": { \"card\": \"xl\"|\"2xl\"|\"3xl\", \"button\": \"xl\"|\"2xl\" } }.\\n' +\n      '\\n' +\n      'TYPOGRAPHY RULES (CRITICAL):\\n' +\n      '- \"space\" = Space Grotesk (modern, tech, geometric) - best for tech/startup\\n' +\n      '- \"syne\" = Syne (bold, contemporary) - best for creative/bold brands\\n' +\n      '- \"manrope\" = Manrope (versatile, professional) - best for corporate/clean\\n' +\n      '- Body: \"inter\" = Inter (most readable, modern) - ALWAYS use for body text\\n' +\n      '- Body: \"manrope\" = Manrope (alternative, slightly rounded) - use if brand needs softer feel\\n' +\n      '- Choose pairing: heading should contrast with body (e.g., Space Grotesk + Inter, Syne + Inter, Manrope + Inter).\\n' +\n      '\\n' +\n      'COLOR RULES:\\n' +\n      '- Use iOS 26 system colors for primary/accent: ' +\n      iosColors.map((c) => `${c.name} (light: ${c.light}, dark: ${c.dark})`).join(', ') +\n      '.\\n' +\n      '- For light mode: bg should be #FFFFFF or #F2F2F7 (iOS light gray), surface #FFFFFF, text #000000 or #1C1C1E, muted #8E8E93.\\n' +\n      '- For dark mode: bg should be #000000 or #1C1C1E, surface #1C1C1E or #2C2C2E, text #FFFFFF, muted #98989D.\\n' +\n      '- Choose one iOS system color as primary (match business vibe: tech=blue/indigo, creative=purple/pink, food=orange/red, health=green/teal).\\n' +\n      '- Accent should be a complementary iOS system color or a variation of primary.\\n' +\n      '- Ensure primaryText has sufficient contrast (WCAG AA: 4.5:1 for normal text, 3:1 for large text).\\n' +\n      '\\n' +\n      `styleKey: ${styleKey}\\n` +\n      `business: ${brief.businessName}\\n` +\n      `industryHints: ${JSON.stringify(brief.services)}\\n` +\n      '\\n' +\n      'OUTPUT: Return a premium design system that rivals top-tier brands. Typography pairing must be perfect.\\n'\n    const out = await genJson(brandPrompt, 0.3)\n    const parsed = BrandTokensSchema.safeParse(out.json)\n    if (parsed.success) brand = parsed.data\n  } catch {\n    brand = null\n  }\n\n  // 1.6) brand assets (deterministic SVG bg; avoids external image APIs for MVP)\n  function hashToInt(seed: string) {\n    let h = 2166136261\n    for (let i = 0; i < seed.length; i++) {\n      h ^= seed.charCodeAt(i)\n      h = Math.imul(h, 16777619)\n    }\n    return h >>> 0\n  }\n  function mulberry32(a: number) {\n    return function () {\n      let t = (a += 0x6d2b79f5)\n      t = Math.imul(t ^ (t >>> 15), t | 1)\n      t ^= t + Math.imul(t ^ (t >>> 7), t | 61)\n      return ((t ^ (t >>> 14)) >>> 0) / 4294967296\n    }\n  }\n  function svgBg(seed: string, colors: any) {\n    const r = mulberry32(hashToInt(seed))\n    const w = 1400\n    const h = 800\n    const blobs = Array.from({ length: 6 }).map(() => {\n      const cx = Math.floor(r() * w)\n      const cy = Math.floor(r() * h)\n      const rx = Math.floor(120 + r() * 260)\n      const ry = Math.floor(90 + r() * 220)\n      const rot = Math.floor(r() * 180)\n      const opacity = (0.08 + r() * 0.12).toFixed(3)\n      const fill = r() > 0.5 ? colors.primary : colors.accent\n      return { cx, cy, rx, ry, rot, opacity, fill }\n    })\n\n    const svg =\n      `<?xml version=\"1.0\" encoding=\"UTF-8\"?>` +\n      `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${w}\" height=\"${h}\" viewBox=\"0 0 ${w} ${h}\" preserveAspectRatio=\"xMidYMid slice\">` +\n      `<defs>` +\n      `<linearGradient id=\"g\" x1=\"0\" y1=\"0\" x2=\"1\" y2=\"1\">` +\n      `<stop offset=\"0\" stop-color=\"${colors.bg}\"/>` +\n      `<stop offset=\"1\" stop-color=\"${colors.surface}\"/>` +\n      `</linearGradient>` +\n      `<filter id=\"blur\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">` +\n      `<feGaussianBlur stdDeviation=\"30\"/>` +\n      `</filter>` +\n      `</defs>` +\n      `<rect width=\"100%\" height=\"100%\" fill=\"url(#g)\"/>` +\n      `<g filter=\"url(#blur)\">` +\n      blobs\n        .map(\n          (b) =>\n            `<ellipse cx=\"${b.cx}\" cy=\"${b.cy}\" rx=\"${b.rx}\" ry=\"${b.ry}\" transform=\"rotate(${b.rot} ${b.cx} ${b.cy})\" fill=\"${b.fill}\" fill-opacity=\"${b.opacity}\"/>`\n        )\n        .join('') +\n      `</g>` +\n      `</svg>`\n    return svg\n  }\n\n  if (brand && !brand.assets?.heroBgSvg) {\n    // Use light mode colors for SVG bg (will adapt via CSS in dark mode)\n    const seed = `${brief.businessName}|${styleKey}|${brand.colors.light.primary}|${brand.colors.light.accent}`\n    brand = { ...brand, assets: { ...(brand.assets || {}), heroBgSvg: svgBg(seed, brand.colors.light) } }\n  }\n\n  // 2) freeform HTML/CSS/JS generation (Cursor-like) OR component-driven layout\n  let freeform: any = null\n  let layout = defaultLayoutForContent(content)\n\n  if (useFreeform) {\n    // Free-form HTML/CSS/JS generation\n    try {\n      const freeformPrompt =\n        'Generate a PREMIUM, world-class landing page HTML/CSS/JS that rivals top-tier SaaS products (Vercel, Linear, Stripe quality). Return JSON only with shape: { \"html\": string (complete HTML), \"css\"?: string (optional separate CSS), \"js\"?: string (optional JS, no eval/Function) }.\\n' +\n        '\\n' +\n        'CRITICAL DESIGN REQUIREMENTS:\\n' +\n        '1. TYPOGRAPHY (MUST BE PERFECT):\\n' +\n        '   - Use premium Google Fonts via @import in CSS: Inter (body), Space Grotesk or Poppins (headings), or Playfair Display (elegant headings).\\n' +\n        '   - Typography scale: h1: 3.5-4.5rem (56-72px), h2: 2.5-3rem (40-48px), h3: 1.75-2rem (28-32px), body: 1rem (16px), small: 0.875rem (14px).\\n' +\n        '   - Line height: 1.2-1.3 for headings, 1.5-1.6 for body text.\\n' +\n        '   - Letter spacing: -0.02em to -0.03em for headings, 0 for body.\\n' +\n        '   - Font weights: 400 (body), 500-600 (medium), 700 (bold headings).\\n' +\n        '\\n' +\n        '2. VISUAL DESIGN (PREMIUM QUALITY):\\n' +\n        '   - iOS 26 style: vibrant system colors, glassmorphism (backdrop-filter: blur(20px)), smooth shadows.\\n' +\n        '   - Spacing system: 4px base (4, 8, 12, 16, 24, 32, 48, 64, 96px).\\n' +\n        '   - Border radius: 12px (cards), 16px (buttons), 24px (large cards), 999px (pills).\\n' +\n        '   - Shadows: subtle, layered (0 1px 3px rgba(0,0,0,0.1), 0 4px 12px rgba(0,0,0,0.15)).\\n' +\n        '   - Gradients: subtle, modern (linear-gradient, radial-gradient).\\n' +\n        '   - Animations: smooth transitions (200-300ms ease-out), hover effects, scroll animations.\\n' +\n        '\\n' +\n        '3. LAYOUT & STRUCTURE:\\n' +\n        '   - Mobile-first responsive design (max-width: 1280px container, padding: 24px mobile, 48px desktop).\\n' +\n        '   - Grid system: CSS Grid for complex layouts, Flexbox for simple alignment.\\n' +\n        '   - White space: generous, breathing room between sections (64-96px vertical spacing).\\n' +\n        '   - Visual hierarchy: clear, strong contrast between sections.\\n' +\n        '\\n' +\n        '4. COLOR & THEME:\\n' +\n        '   - Use brand colors from Brand object if provided.\\n' +\n        '   - Dark/light mode via CSS variables (--color-bg, --color-text, --color-primary).\\n' +\n        '   - High contrast ratios (WCAG AA minimum).\\n' +\n        '   - Accent colors: vibrant, saturated (iOS 26 system colors).\\n' +\n        '\\n' +\n        '5. INTERACTIVE ELEMENTS:\\n' +\n        '   - Buttons: large (48px height), rounded (16px), with hover/active states.\\n' +\n        '   - Cards: elevated, with subtle shadows, hover lift effect.\\n' +\n        '   - Forms: clean inputs, proper focus states, smooth transitions.\\n' +\n        '\\n' +\n        '6. CODE QUALITY:\\n' +\n        '   - HTML: semantic, accessible (nav, main, section, article, footer).\\n' +\n        '   - CSS: organized, use CSS variables for theming, no inline styles in HTML (use <style> tag).\\n' +\n        '   - JS: vanilla JS only, smooth scroll, form handling, no dangerous functions.\\n' +\n        '   - No external dependencies (no CDN, no frameworks).\\n' +\n        '\\n' +\n        '7. CONTENT INTEGRATION:\\n' +\n        '   - Use provided Content object for all text.\\n' +\n        '   - Use Brand colors/typography if provided.\\n' +\n        '   - Match Style key aesthetic (minimalist_tech = clean/tech, bold_modern = vibrant/bold, clean_corporate = professional/calm).\\n' +\n        '\\n' +\n        `Brief: ${JSON.stringify(brief)}\\n` +\n        `Style: ${styleKey}\\n` +\n        `Content: ${JSON.stringify(content)}\\n` +\n        `Brand: ${brand ? JSON.stringify(brand) : 'null'}\\n` +\n        '\\n' +\n        'OUTPUT: Return a complete, production-ready HTML page that looks like it was designed by a top-tier design agency. Every pixel must be perfect.\\n'\n      const out = await genJson(freeformPrompt, 0.7)\n      const parsed = FreeformHtmlSchema.safeParse(out.json)\n      if (parsed.success) {\n        freeform = {\n          html: sanitizeHtml(parsed.data.html),\n          css: parsed.data.css ? sanitizeHtml(parsed.data.css) : undefined,\n          js: parsed.data.js ? sanitizeJs(parsed.data.js) : undefined,\n        }\n      }\n    } catch {\n      // Fallback to component-driven\n      freeform = null\n    }\n  } else {\n    // Component-driven layout\n    try {\n      const layoutPrompt =\n        'Create a PREMIUM section layout plan that maximizes visual impact and conversion. Return JSON only with shape { \"sections\": [{ \"type\": \"hero\"|\"stats\"|\"features\"|\"pricing\"|\"testimonials\"|\"faq\"|\"lead\"|\"footer\", \"variant\"?: string, \"anchor\"?: string }] }.\\n' +\n        '\\n' +\n        'LAYOUT RULES:\\n' +\n        '1. Structure: hero first, footer last; use anchors for features/pricing/faq/lead.\\n' +\n        '2. Visual Flow: Create a narrative journey (hero → stats → features → pricing → testimonials → faq → lead).\\n' +\n        '3. Variant Selection: Choose at least 3 non-default variants to create visual diversity and interest.\\n' +\n        '\\n' +\n        'STYLE-SPECIFIC VARIANT PREFERENCES:\\n' +\n        '- clean_corporate: hero centered (trustworthy), pricing table (comparison-focused), faq cards (scannable), testimonials quotes (elegant).\\n' +\n        '- bold_modern: hero split (dynamic), features zigzag (energetic), testimonials cards (vibrant), pricing cards (bold), faq accordion (interactive).\\n' +\n        '- minimalist_tech: hero minimal or centered (clean), features grid (organized), pricing cards (simple), testimonials quotes (subtle), faq accordion (minimal).\\n' +\n        '\\n' +\n        'AVAILABLE VARIANTS:\\n' +\n        '- hero: split (image left, text right) | centered (text center, balanced) | minimal (ultra-clean, text-focused)\\n' +\n        '- features: grid (3-column cards) | zigzag (alternating left/right) | list (vertical, compact)\\n' +\n        '- pricing: cards (side-by-side plans) | table (comparison table) | compare (feature comparison)\\n' +\n        '- testimonials: quotes (large quote style) | cards (card-based) | marquee (carousel)\\n' +\n        '- faq: accordion (expandable) | cards (grid of Q&A cards)\\n' +\n        '- lead: form (full form) | cta (simple CTA button)\\n' +\n        '\\n' +\n        `styleKey: ${styleKey}\\n` +\n        `brand: ${brand ? JSON.stringify(brand) : 'null'}\\n` +\n        `hasStats: ${Boolean(content.stats)}; hasTestimonials: ${Boolean(content.testimonials)}; hasFaq: ${Boolean(content.faq)}\\n` +\n        '\\n' +\n        'OUTPUT: Return a layout that creates visual interest, guides the eye, and maximizes conversion. Every section variant should serve a purpose.\\n'\n      const out = await genJson(layoutPrompt, 0.2)\n      const parsed = SiteLayoutSchema.safeParse(out.json)\n      if (parsed.success) layout = parsed.data\n    } catch {\n      // keep default\n    }\n  }\n\n  // Generate v2 SiteManifest if requested\n  if (useV2 && !useFreeform) {\n    try {\n      console.log('[v2] Starting SiteManifest generation...')\n      const dataPoints = parseBriefToManifest(brief, styleKey)\n      const theme = styleKeyToTheme(styleKey)\n      const aidPrompt = getAIDAPrompt(dataPoints)\n\n      // Generate SiteManifest content using \"FIGMA AI\" level design\n      const manifestPrompt =\n        '# ROLE: SENIOR FIGMA AI DESIGNER\\n' +\n        '\\n' +\n        'You are an elite design system architect. Your task is to generate a pixel-perfect, visually stunning landing page that rivals the best SaaS products (Linear, Vercel, Stripe, Raycast).\\n' +\n        '\\n' +\n        '**CRITICAL MANDATORY RULES (NO EXCEPTIONS):**\\n' +\n        '1. EVERY feature item MUST have an icon field (lucide-react icon name).\\n' +\n        '2. Hero section MUST have a visual element (icon, gradient, or image).\\n' +\n        '3. Typography MUST be large and impactful (H1: 72-96px, H2: 48-64px).\\n' +\n        '4. All text MUST be benefit-focused, specific, and compelling.\\n' +\n        '5. NO generic placeholder text. Write real, persuasive copy.\\n' +\n        '\\n' +\n        '**INPUT CONTEXT:**\\n' +\n        `- Business Name: ${brief.businessName}\\n` +\n        `- Niche: ${brief.services.join(', ')}\\n` +\n        `- Value Proposition: ${brief.uniqueSellingPoints.join(', ')}\\n` +\n        `- Target Audience: ${brief.targetAudience || 'Clients'}\\n` +\n        `- Vibe: ${themePreset?.name || 'Professional Trust'}\\n` +\n        `- Language: ${brief.language}\\n` +\n        '\\n' +\n        '**VISUAL DESIGN SYSTEM (FIGMA AI STANDARDS):**\\n' +\n        '\\n' +\n        '### 1. ICON SYSTEM (MANDATORY - 100% COVERAGE):\\n' +\n        'Every single feature, benefit, and section MUST have a relevant lucide-react icon:\\n' +\n        '- Speed/Performance: \"zap\"\\n' +\n        '- Security/Trust: \"shield\"\\n' +\n        '- Growth/Launch: \"rocket\"\\n' +\n        '- Quality/Premium: \"star\"\\n' +\n        '- Analytics/Data: \"barChart3\"\\n' +\n        '- Niche-specific: Match the service (e.g., \"coffee\" for coffee shop, \"code\" for tech, \"heart\" for health)\\n' +\n        '- Innovation: \"sparkles\"\\n' +\n        '- Success: \"trophy\"\\n' +\n        '- Precision: \"target\"\\n' +\n        '- Support: \"headphones\"\\n' +\n        '- Integration: \"plug\"\\n' +\n        '\\n' +\n        '**ICON SELECTION LOGIC:**\\n' +\n        '1. Read the feature title and description.\\n' +\n        '2. Identify the core benefit (speed, security, quality, etc.).\\n' +\n        '3. Select the most appropriate icon from the list above.\\n' +\n        '4. If niche-specific (coffee, fitness, etc.), use that icon.\\n' +\n        '5. NEVER leave icon field empty or use generic icons.\\n' +\n        '\\n' +\n        '### 2. TYPOGRAPHY HIERARCHY (PIXEL-PERFECT):\\n' +\n        '- **H1 (Hero Headline):** 72-96px, font-weight: 800, tracking: -0.04em, line-height: 1.05\\n' +\n        '  - Must be 5-8 powerful words\\n' +\n        '  - Use gradient text: text-transparent bg-clip-text bg-gradient-to-r from-white to-white/60\\n' +\n        '  - Example: \"AI-Powered Growth Platform\" (NOT \"Welcome to our service\")\\n' +\n        '\\n' +\n        '- **H2 (Section Titles):** 48-64px, font-weight: 700, tracking: -0.03em, line-height: 1.1\\n' +\n        '  - Clear, benefit-focused (e.g., \"Ship Faster, Build Better\")\\n' +\n        '\\n' +\n        '- **H3 (Feature Titles):** 24-32px, font-weight: 600, tracking: -0.02em\\n' +\n        '  - 3-6 words, benefit-focused\\n' +\n        '\\n' +\n        '- **Body Text:** 16-18px, line-height: 1.6, color: text-slate-400\\n' +\n        '  - 15-25 words per description\\n' +\n        '  - Specific, not generic\\n' +\n        '\\n' +\n        '### 3. VISUAL ELEMENTS (NO EMPTY SPACES):\\n' +\n        '\\n' +\n        '**Hero Section Visual (MANDATORY):**\\n' +\n        '- Type: \"icon\" - Use a large, impactful icon (rocket, sparkles, zap)\\n' +\n        '- OR Type: \"gradient\" - Use a rich gradient background\\n' +\n        '- OR Type: \"image\" - Use Unsplash URL: https://source.unsplash.com/1600x900/?' + (brief.services[0] || 'abstract') + ',modern\\n' +\n        '- NEVER leave visual field empty\\n' +\n        '\\n' +\n        '**Feature Cards Visual:**\\n' +\n        '- Each feature card MUST have an icon (already covered above)\\n' +\n        '- Icons should be large (w-12 h-12 or w-16 h-16)\\n' +\n        '- Icons should have gradient backgrounds or accent colors\\n' +\n        '\\n' +\n        '### 4. CONTENT QUALITY (AIDA FRAMEWORK):\\n' +\n        '\\n' +\n        '**Headlines (ATTENTION):**\\n' +\n        '- Must grab attention immediately\\n' +\n        '- Use power words: \"Transform\", \"Accelerate\", \"Revolutionize\", \"Unlock\"\\n' +\n        '- Be specific: \"10x Your Productivity\" (NOT \"Increase Efficiency\")\\n' +\n        '- Match the niche: For coffee shop, use \"Artisan Coffee Experience\"\\n' +\n        '\\n' +\n        '**Subheadlines (INTEREST + DESIRE):**\\n' +\n        '- Address pain points\\n' +\n        '- Create desire with benefits\\n' +\n        '- Use numbers when possible: \"Save 20 hours per week\"\\n' +\n        '- Be specific: \"Join 10,000+ businesses\" (NOT \"Join many users\")\\n' +\n        '\\n' +\n        '**Features (DESIRE + ACTION):**\\n' +\n        '- Focus on BENEFITS, not features\\n' +\n        '- Use \"you\" language: \"You get instant insights\" (NOT \"The system provides\")\\n' +\n        '- Be specific: \"Ship features 5x faster\" (NOT \"Faster development\")\\n' +\n        '- Include numbers: \"99.9% uptime\", \"10x faster\", \"50% cost reduction\"\\n' +\n        '\\n' +\n        '**CTAs (ACTION):**\\n' +\n        '- Action-oriented: \"Start Free Trial\", \"Get Started\", \"Book Demo\"\\n' +\n        '- Create urgency: \"Start Now\", \"Join Today\"\\n' +\n        '- Match the language: Use Kazakh if language is KZ\\n' +\n        '\\n' +\n        '### 5. DESIGN COMPOSITION:\\n' +\n        '\\n' +\n        '**Spacing & Layout:**\\n' +\n        '- Hero padding: py-24 lg:py-32 (96-128px vertical)\\n' +\n        '- Section padding: py-16 lg:py-24 (64-96px vertical)\\n' +\n        '- Card padding: p-6 md:p-8 lg:p-10 (24-40px)\\n' +\n        '- Gap between elements: gap-6 md:gap-8 (24-32px)\\n' +\n        '\\n' +\n        '**Color & Contrast:**\\n' +\n        '- Background: #020617 (slate-950) or #09090b (zinc-950)\\n' +\n        '- Text: white for headings, slate-400 for body\\n' +\n        '- Accents: Use theme preset colors (purple, blue, etc.)\\n' +\n        '- High contrast for CTAs\\n' +\n        '\\n' +\n        '**Glassmorphism:**\\n' +\n        '- All cards: bg-white/5 backdrop-blur-xl border border-white/10\\n' +\n        '- Hover: bg-white/10 border-white/20\\n' +\n        '- Rounded: rounded-2xl (16px)\\n' +\n        '\\n' +\n        '### 6. OUTPUT FORMAT:\\n' +\n        '\\n' +\n        'Return a SiteManifest v2 JSON with this structure:\\n' +\n        '\\n' +\n        '```json\\n' +\n        '{\\n' +\n        '  \"hero\": {\\n' +\n        '    \"badge\": \"string (3-5 words, punchy)\",\\n' +\n        '    \"headline\": \"string (5-8 words, powerful, gradient text)\",\\n' +\n        '    \"subheadline\": \"string (15-25 words, benefit-focused, specific)\",\\n' +\n        '    \"cta\": {\\n' +\n        '      \"primary\": \"string (action-oriented, e.g. Start Free Trial)\",\\n' +\n        '      \"secondary\": \"string (optional)\",\\n' +\n        '      \"href\": \"#lead\"\\n' +\n        '    },\\n' +\n        '    \"visual\": {\\n' +\n        '      \"type\": \"icon|gradient|image\",\\n' +\n        '      \"value\": \"string (icon name, gradient description, or image URL)\"\\n' +\n        '    }\\n' +\n        '  },\\n' +\n        '  \"features\": {\\n' +\n        '    \"title\": \"string (benefit-focused, 3-6 words)\",\\n' +\n        '    \"items\": [\\n' +\n        '      {\\n' +\n        '        \"title\": \"string (3-6 words, benefit-focused)\",\\n' +\n        '        \"description\": \"string (15-25 words, specific benefits with numbers if possible)\",\\n' +\n        '        \"icon\": \"string (MANDATORY - lucide-react icon name)\",\\n' +\n        '        \"highlight\": boolean\\n' +\n        '      }\\n' +\n        '    ]\\n' +\n        '  },\\n' +\n        '  \"pricing\": { ... },\\n' +\n        '  \"testimonials\": { ... },\\n' +\n        '  \"faq\": { ... }\\n' +\n        '}\\n' +\n        '```\\n' +\n        '\\n' +\n        '**VALIDATION CHECKLIST:**\\n' +\n        'Before returning, verify:\\n' +\n        '✓ Every feature has an icon field (NOT empty)\\n' +\n        '✓ Hero has a visual field (NOT empty)\\n' +\n        '✓ All headlines are 5-8 words, powerful\\n' +\n        '✓ All descriptions are 15-25 words, specific\\n' +\n        '✓ No generic text like \"Lorem ipsum\" or \"Coming soon\"\\n' +\n        '✓ Numbers are included where relevant (99.9%, 10x, 1000+)\\n' +\n        '✓ Language matches the brief (Kazakh if language is KZ)\\n' +\n        '\\n' +\n        '**NOW GENERATE THE SITEMANIFEST JSON:**\\n' +\n        '\\n' +\n        '**CONTEXT:** You are the engine behind a premium website builder. The user wants a site that looks like it cost $10,000. The output must rival Linear.app, Raycast, and Vercel.\\n' +\n        '\\n' +\n        '**THE TECH STACK & DNA (Strict Adherence):**\\n' +\n        '1. Framework: Next.js 14 (App Router) + Tailwind CSS.\\n' +\n        '2. Animation Engine: framer-motion (Mandatory for all interactions).\\n' +\n        '3. UI Library Simulation (Aceternity UI):\\n' +\n        '   - Keywords: BentoGrid, HeroHighlight, MovingBorder, SparklesCore, InfiniteMovingCards, Spotlight.\\n' +\n        '   - Rule: Do NOT use standard flat CSS. Every container must have depth (gradients, blurs, noise).\\n' +\n        '\\n' +\n        '**DESIGN CONSTITUTION (The \"Anti-Boring\" Laws):**\\n' +\n        '1. Absolute Dark Mode: Background is never #000. Use #020617 (Slate-950) or #09090b (Zinc-950).\\n' +\n        '2. Lighting: Every section must have a \"Light Source\" (e.g., a radial gradient glow behind the text or spotlight from the top).\\n' +\n        '3. Grid System: NEVER use symmetrical 3-column grids. Use Asymmetrical Bento Grids (Span 2, Span 1, Tall vertical cards).\\n' +\n        '4. Glassmorphism: All cards use bg-white/5, backdrop-blur-xl, border-white/10.\\n' +\n        '5. Typography: Headers use tracking-tighter (-2px). Text uses text-transparent bg-clip-text bg-gradient-to-b from-white to-neutral-400.\\n' +\n        '\\n' +\n        '**INPUT DATA:**\\n' +\n        `- Business Name: ${brief.businessName}\\n` +\n        `- Niche/Topic: ${brief.services.join(', ')}\\n` +\n        `- Value Proposition: ${brief.uniqueSellingPoints.join(', ')}\\n` +\n        `- Vibe Selection: ${themePreset?.name || 'Professional Trust'}\\n` +\n        '\\n' +\n        '**EXECUTION PLAN (Step-by-Step):**\\n' +\n        '\\n' +\n        '### SECTION 1: THE HERO (The \"Hook\")\\n' +\n        '- Layout: Centered, massive typography.\\n' +\n        '- Effect: Implement a \"Spotlight\" effect from the top.\\n' +\n        '- Headline: Write a punchy, 5-word headline based on the niche. Use h1 with text-7xl font-bold tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-neutral-50 to-neutral-400.\\n' +\n        '- CTA: A \"Magnetic Button\" with a glowing border animation (border-gradient).\\n' +\n        '\\n' +\n        '### SECTION 2: THE BENTO GRID (The \"Features\")\\n' +\n        '- Architecture: Create a <BentoGrid> container.\\n' +\n        '- Content: Generate 4 key benefits based on the value proposition.\\n' +\n        '- Visuals:\\n' +\n        '  - Item 1 (Large): Spans 2 columns. Contains a rich gradient icon.\\n' +\n        '  - Item 2 & 3 (Small): Square aspect ratio.\\n' +\n        '  - Item 4 (Tall): Vertical card.\\n' +\n        '- Styling: bg-neutral-900/50, border-white/10, hover:border-white/20.\\n' +\n        '\\n' +\n        '### SECTION 3: SOCIAL PROOF (The \"Trust\")\\n' +\n        '- Component: Use an <InfiniteMovingCards> marquee component.\\n' +\n        '- Content: Generate 5 realistic testimonials relevant to the niche.\\n' +\n        '\\n' +\n        '### SECTION 4: THE OFFER (Pricing/Contact)\\n' +\n        '- Design: A single \"Focus Card\" in the center with a radial-gradient glow behind it.\\n' +\n        '- Action: A high-contrast button.\\n' +\n        '\\n' +\n        '**STRICT CODE RULES:**\\n' +\n        '1. Single File Output: Provide the entire landing page logic in one file (or specify component code clearly).\\n' +\n        '2. No Placeholders: Write REAL, persuasive marketing copy in Kazakh (or user language).\\n' +\n        '3. Visual Noise: Add a subtle bg-dot-white/[0.2] pattern to the main background to avoid flatness.\\n' +\n        '\\n' +\n        '**OUTPUT:**\\n' +\n        'Generate the full SiteManifest v2 JSON with all sections. Every word must earn its place. Be specific, benefit-focused, and compelling.\\n' +\n        '\\n' +\n        'Shape: { \"hero\": { \"badge\"?: string (short, punchy), \"headline\": string (powerful, 5-7 words, MUST use gradient text), \"subheadline\": string (clear value, 15-25 words), \"cta\": { \"primary\": string (action-oriented), \"secondary\"?: string, \"href\": string }, \"visual\"?: { \"type\": \"icon\"|\"svg\"|\"gradient\"|\"image\", \"value\": string } }, ' +\n        '\"socialProof\"?: { \"title\"?: string, \"items\": [{ \"label\": string, \"value\": string (impressive numbers), \"icon\"?: string (lucide-react name) }] }, ' +\n        '\"features\": { \"title\": string, \"items\": [{ \"title\": string (benefit-focused, 3-6 words), \"description\": string (clear benefit, 10-20 words), \"icon\"?: string (lucide-react name), \"highlight\"?: boolean }] }, ' +\n        '\"pricing\": { \"title\": string, \"plans\": [{ \"name\": string, \"price\": string, \"period\"?: string, \"description\"?: string, \"bullets\": [string] (benefits, not features), \"highlighted\"?: boolean, \"cta\"?: string }] }, ' +\n        '\"testimonials\"?: { \"title\": string, \"items\": [{ \"name\": string, \"role\": string, \"quote\": string (authentic, specific, 15-30 words), \"avatar\"?: string, \"rating\"?: number }] }, ' +\n        '\"faq\"?: { \"title\": string, \"items\": [{ \"q\": string, \"a\": string }] }, ' +\n        '\"footer\"?: { \"note\"?: string, \"links\"?: [{ \"label\": string, \"href\": string }] } }.\\n' +\n        '\\n' +\n        '### DESIGN DNA - MODERN PREMIUM NOIR:\\n' +\n        '1. **Visual Style**: \"Modern Premium Noir\". Use deep ebony (#050505) as the base. Use high-end gradients: from subtle indigo to electric violet for primary actions.\\n' +\n        '2. **Glassmorphism**: Every card/container must have: `bg-white/5`, `backdrop-blur-xl`, `border border-white/10`, and `rounded-2xl`.\\n' +\n        '3. **Bento Grid Layout**: Feature sections MUST be asymmetrical. Large cards for primary stats, smaller cards for secondary info. No 3-column simple grids.\\n' +\n        '4. **Typography**: Use premium fonts. Headers: `tracking-tighter`, `font-bold`, large sizes (text-7xl to text-9xl for H1). Body: `text-slate-400`, `leading-relaxed`.\\n' +\n        '\\n' +\n        '### COMPONENT SPECIFICS:\\n' +\n        '- **Hero**: Use a giant \"Gradient Text\" for the main headline (indigo to violet gradient). Add a floating effect for the main CTA button.\\n' +\n        '- **Features**: MUST use Bento Grid 2.0 (asymmetrical layout). Large cards for primary features, smaller for secondary.\\n' +\n        '- **Pricing**: The \"Premium\" card must have a `shimmer` border effect (animated border glow).\\n' +\n        '- **Testimonials**: Use a \"Marquee\" (infinite loop scroll) animation for social proof to make the site feel alive.\\n' +\n        '- **FAQ**: Use clean, minimal accordions with smooth height transitions.\\n' +\n        '\\n' +\n        '### ANIMATION (Framer Motion):\\n' +\n        '- Implement `AnimatePresence`.\\n' +\n        '- Every section must use a `staggerChildren` reveal effect when entering the viewport.\\n' +\n        '- Buttons must have a scale-down effect on click.\\n' +\n        '- All cards must have `whileHover={{ y: -10 }}` effect.\\n' +\n        '\\n' +\n        aidPrompt +\n        '\\n' +\n        'Shape: { \"hero\": { \"badge\"?: string (short, punchy), \"headline\": string (powerful, 6-12 words, MUST be gradient text), \"subheadline\": string (clear value, 15-25 words), \"cta\": { \"primary\": string (action-oriented), \"secondary\"?: string, \"href\": string }, \"visual\"?: { \"type\": \"icon\"|\"svg\"|\"gradient\"|\"image\", \"value\": string } }, ' +\n        '\"socialProof\"?: { \"title\"?: string, \"items\": [{ \"label\": string, \"value\": string (impressive numbers), \"icon\"?: string (lucide-react name) }] }, ' +\n        '\"features\": { \"title\": string, \"items\": [{ \"title\": string (benefit-focused, 3-6 words), \"description\": string (clear benefit, 10-20 words), \"icon\"?: string (lucide-react name), \"highlight\"?: boolean }] }, ' +\n        '\"pricing\": { \"title\": string, \"plans\": [{ \"name\": string, \"price\": string, \"period\"?: string, \"description\"?: string, \"bullets\": [string] (benefits, not features), \"highlighted\"?: boolean, \"cta\"?: string }] }, ' +\n        '\"testimonials\"?: { \"title\": string, \"items\": [{ \"name\": string, \"role\": string, \"quote\": string (authentic, specific, 15-30 words), \"avatar\"?: string, \"rating\"?: number }] }, ' +\n        '\"faq\"?: { \"title\": string, \"items\": [{ \"q\": string (common concern), \"a\": string (helpful, 20-40 words) }] }, ' +\n        '\"footer\"?: { \"note\"?: string, \"links\"?: [{ \"label\": string, \"href\": string }] } }.\\n' +\n        `Language: ${brief.language}\\n` +\n        `Business Name: ${brief.businessName}\\n` +\n        `Core Offer: ${brief.services.join(', ')}\\n` +\n        `Style Archetype: ${styleKey}\\n` +\n        '\\n' +\n        'Generate the full SiteManifest using the highest standards of Vibe Coding. Avoid boilerplate looks. Make it look unique, like a custom-coded $10k landing page.\\n' +\n        'OUTPUT: Return JSON only. Every word must earn its place. Be specific, benefit-focused, and compelling.\\n'\n\n      console.log('[v2] Generating content with AI...')\n      let manifestContentOut: any = null\n      try {\n        manifestContentOut = await genJson(manifestPrompt, 0.6)\n      } catch (e: any) {\n        console.error('[v2] Manifest AI generation failed, using fallback from content:', {\n          error: String(e?.message || e),\n        })\n        manifestContentOut = { json: null, raw: '' }\n      }\n      \n      // Ensure we have valid JSON structure\n      if (!manifestContentOut.json || typeof manifestContentOut.json !== 'object') {\n        console.error('[v2] Invalid JSON response from AI, falling back to content-based manifest')\n      }\n      \n      console.log('[v2] Parsing content schemas...')\n\n      const raw = (manifestContentOut.json || {}) as any\n\n      const pickIconForText = (text: string) => {\n        const t = text.toLowerCase()\n        if (t.includes('аналит') || t.includes('analytics') || t.includes('data')) return 'barChart3'\n        if (t.includes('қауіп') || t.includes('security') || t.includes('қауіпсіз')) return 'shield'\n        if (t.includes('жылдам') || t.includes('speed') || t.includes('performance')) return 'zap'\n        if (t.includes('өс') || t.includes('growth') || t.includes('launch')) return 'rocket'\n        if (t.includes('сапа') || t.includes('premium') || t.includes('quality')) return 'star'\n        if (t.includes('кофе') || t.includes('coffee')) return 'coffee'\n        if (t.includes('қолдау') || t.includes('support')) return 'headphones'\n        if (t.includes('интеграц') || t.includes('integrat')) return 'plug'\n        if (t.includes('инновац') || t.includes('ai') || t.includes('smart')) return 'sparkles'\n        return 'sparkles'\n      }\n\n      const fallbackHero = {\n        badge: `${brief.businessName} • Premium`,\n        headline: `${brief.businessName} үшін жаңа деңгей`,\n        subheadline: `${brief.targetAudience || 'Клиенттер'} үшін ${brief.services.join(\n          ', '\n        )} бағытында нақты нәтижеге жеткізетін премиум платформа.`,\n        cta: {\n          primary: brief.cta?.label || 'Бастау',\n          secondary: 'Толығырақ',\n          href: '#lead',\n        },\n        visual: {\n          type: 'image',\n          value: `https://source.unsplash.com/1600x900/?${brief.services[0] || 'abstract'},modern`,\n        },\n      }\n\n      const normalizedHero = {\n        badge: raw.hero?.badge || content?.hero?.badge || fallbackHero.badge,\n        headline: raw.hero?.headline || content?.hero?.headline || fallbackHero.headline,\n        subheadline: raw.hero?.subheadline || content?.hero?.subheadline || fallbackHero.subheadline,\n        cta: {\n          primary: raw.hero?.cta?.primary || brief.cta?.label || fallbackHero.cta.primary,\n          secondary: raw.hero?.cta?.secondary || fallbackHero.cta.secondary,\n          href: raw.hero?.cta?.href || fallbackHero.cta.href,\n        },\n        visual: raw.hero?.visual || fallbackHero.visual,\n      }\n\n      const baseFeatureTexts =\n        (content?.features?.items?.length ? content.features.items.map((i: any) => i.title) : null) ||\n        (brief.uniqueSellingPoints?.length ? brief.uniqueSellingPoints : brief.services)\n\n      const fallbackFeatures = baseFeatureTexts\n        .slice(0, 4)\n        .map((text: string, idx: number) => ({\n          title: text,\n          description: `Сізге нақты нәтиже береді: ${text.toLowerCase()} арқылы өнімділікті арттырып, уақытты үнемдейсіз.`,\n          icon: pickIconForText(text),\n          highlight: idx === 0,\n        }))\n\n      const normalizedFeatures = {\n        title: raw.features?.title || 'Нәтиже беретін мүмкіндіктер',\n        items: Array.isArray(raw.features?.items) && raw.features.items.length > 0\n          ? raw.features.items.map((it: any, idx: number) => ({\n              title: String(it?.title || fallbackFeatures[idx]?.title || 'Артықшылық'),\n              description: String(\n                it?.description || fallbackFeatures[idx]?.description || 'Нақты пайда әкелетін артықшылық.'\n              ),\n              icon: String(it?.icon || pickIconForText(`${it?.title || ''} ${it?.description || ''}`)),\n              highlight: Boolean(it?.highlight),\n            }))\n          : fallbackFeatures,\n      }\n\n      const normalizedPricing = raw.pricing || content?.pricing || {\n        title: 'Бағалар',\n        plans: [\n          {\n            name: 'Start',\n            price: '₸49,000',\n            period: '/ай',\n            description: 'Шағын бизнеске арналған',\n            bullets: ['Жылдам іске қосу', 'Премиум дизайн', 'Техқолдау'],\n            highlighted: false,\n            cta: 'Бастау',\n          },\n          {\n            name: 'Pro',\n            price: '₸99,000',\n            period: '/ай',\n            description: 'Өсуге арналған толық пакет',\n            bullets: ['AI контент', 'Конверсия фокус', 'Жеке менеджер'],\n            highlighted: true,\n            cta: 'Pro таңдау',\n          },\n        ],\n      }\n\n      const heroContent = HeroContentSchema.safeParse(normalizedHero)\n      const socialProof = raw.socialProof\n        ? SocialProofSchema.safeParse(raw.socialProof)\n        : { success: true, data: undefined }\n      const featuresContent = FeaturesContentSchema.safeParse(normalizedFeatures)\n      const pricingContent = PricingContentSchema.safeParse(normalizedPricing)\n      const testimonialsContent = raw.testimonials\n        ? TestimonialsContentSchema.safeParse(raw.testimonials)\n        : { success: true, data: undefined }\n      const faqContent = raw.faq ? FAQContentSchema.safeParse(raw.faq) : { success: true, data: undefined }\n      const footerContent = raw.footer ? FooterContentSchema.safeParse(raw.footer) : { success: true, data: undefined }\n\n      if (\n        !heroContent.success ||\n        !socialProof.success ||\n        !featuresContent.success ||\n        !pricingContent.success ||\n        !testimonialsContent.success ||\n        !faqContent.success ||\n        !footerContent.success\n      ) {\n        // Validation failed: do NOT fallback to v1 when v2 is requested\n        const issues = {\n          hero: !heroContent.success ? heroContent.error?.issues : 'ok',\n          socialProof: !socialProof.success ? socialProof.error?.issues : 'ok',\n          features: !featuresContent.success ? featuresContent.error?.issues : 'ok',\n          pricing: !pricingContent.success ? pricingContent.error?.issues : 'ok',\n          testimonials: !testimonialsContent.success ? testimonialsContent.error?.issues : 'ok',\n          faq: !faqContent.success ? faqContent.error?.issues : 'ok',\n          footer: !footerContent.success ? footerContent.error?.issues : 'ok',\n        }\n        console.error('[v2] Manifest validation failed:', issues)\n        return NextResponse.json(\n          { error: 'v2 manifest validation failed', details: issues },\n          { status: 500 }\n        )\n      } else {\n        console.log('[v2] All content validated, creating manifest...')\n        const sections = generateDefaultSections(\n          Boolean(socialProof.data),\n          Boolean(testimonialsContent.data),\n          Boolean(faqContent.data)\n        )\n\n        // Get theme preset if themeId is provided\n        const themePreset = themeId ? getThemePreset(themeId) : undefined\n\n        const manifest = {\n          version: 2 as const,\n          theme,\n          layout: 'standard' as const,\n          sections,\n          content: {\n            hero: heroContent.data,\n            socialProof: socialProof.data,\n            features: featuresContent.data,\n            pricing: pricingContent.data,\n            testimonials: testimonialsContent.data,\n            faq: faqContent.data,\n            footer: footerContent.data,\n          },\n          meta: {\n            businessName: brief.businessName,\n            language: brief.language,\n            colorPreference: dataPoints.colorPreference,\n            themeId: themeId || undefined,\n            themePreset: themePreset\n              ? {\n                  id: themePreset.id,\n                  primary: themePreset.primary,\n                  glow: themePreset.glow,\n                  bgMesh: themePreset.bgMesh,\n                }\n              : undefined,\n          },\n        }\n\n        const validatedManifest = SiteManifestSchema.safeParse(manifest)\n        if (validatedManifest.success) {\n          console.log('[v2] Manifest validated, saving to database...')\n          // Save v2 manifest\n          let supabase: ReturnType<typeof supabaseService>\n          try {\n            supabase = supabaseService()\n          } catch (e: any) {\n            console.error('[v2] Supabase service error:', e)\n            return NextResponse.json(\n              { error: 'Server misconfigured: set SUPABASE_SERVICE_ROLE_KEY', details: String(e?.message || e) },\n              { status: 500 }\n            )\n          }\n          \n          const insert = await supabase\n            .from('sites')\n            .insert({ brief, config: validatedManifest.data, style_key: styleKey })\n            .select('id')\n            .single()\n          if (insert.error) {\n            console.error('[v2] Database insert error:', insert.error)\n            return NextResponse.json({ error: insert.error.message }, { status: 500 })\n          }\n          \n          console.log('[v2] Site created successfully:', insert.data.id)\n\n          const siteId = insert.data.id\n          await supabase.from('leads').update({ site_id: siteId, style_key: styleKey }).eq('id', leadId)\n\n          // Screenshots\n          const origin = req.headers.get('origin') || ''\n          const baseUrl =\n            process.env.NEXT_PUBLIC_SITE_URL ||\n            (process.env.VERCEL_URL ? `https://${process.env.VERCEL_URL}` : origin) ||\n            ''\n          if (baseUrl) {\n            fetch(`${baseUrl}/api/screenshot`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify({ siteId, view: 'desktop', kind: 'legacy_site' }),\n            }).catch(() => {})\n          }\n\n          return NextResponse.json({ siteId, siteUrl: `/site/${siteId}`, version: 2 })\n        } else {\n          console.error('[v2] Final manifest validation failed')\n          return NextResponse.json(\n            { error: 'v2 manifest validation failed (final)' },\n            { status: 500 }\n          )\n        }\n      }\n    } catch (e: any) {\n      console.error('[v2] Generation failed:', {\n        error: String(e?.message || e),\n        stack: e?.stack,\n      })\n      return NextResponse.json(\n        { error: 'v2 generation failed', details: String(e?.message || e) },\n        { status: 500 }\n      )\n    }\n  }\n\n    // v1 generation (existing logic) - only if v2 is not requested\n    console.log('[v1] Starting v1 generation...')\n    const config = {\n      version: 1 as const,\n      styleKey,\n      tokens: tokensForStyle(styleKey),\n      brand,\n      brief,\n      content,\n      layout: freeform ? undefined : layout,\n      freeform: freeform || undefined,\n    }\n    const validated = SiteConfigSchema.safeParse(config)\n    if (!validated.success) return NextResponse.json({ error: 'Config validation failed' }, { status: 500 })\n\n    let supabase: ReturnType<typeof supabaseService>\n    try {\n      supabase = supabaseService()\n    } catch (e: any) {\n      return NextResponse.json(\n        { error: 'Server misconfigured: set SUPABASE_SERVICE_ROLE_KEY', details: String(e?.message || e) },\n        { status: 500 }\n      )\n    }\n    const insert = await supabase\n      .from('sites')\n      .insert({ brief, config: validated.data, style_key: styleKey })\n      .select('id')\n      .single()\n    if (insert.error) return NextResponse.json({ error: insert.error.message }, { status: 500 })\n\n    const siteId = insert.data.id\n\n    // link lead -> site\n    await supabase.from('leads').update({ site_id: siteId, style_key: styleKey }).eq('id', leadId)\n\n    // kick screenshots (best-effort)\n    const origin = req.headers.get('origin') || ''\n    const baseUrl =\n      process.env.NEXT_PUBLIC_SITE_URL ||\n      (process.env.VERCEL_URL ? `https://${process.env.VERCEL_URL}` : origin) ||\n      ''\n    if (baseUrl) {\n      fetch(`${baseUrl}/api/screenshot`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ siteId, view: 'desktop', kind: 'legacy_site' }),\n      }).catch(() => {})\n      fetch(`${baseUrl}/api/screenshot`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ siteId, view: 'mobile', kind: 'legacy_site' }),\n      }).catch(() => {})\n    }\n\n    return NextResponse.json({ siteId, siteUrl: `/site/${siteId}` })\n  } catch (error: any) {\n    console.error('[API] Unhandled error:', error)\n    return NextResponse.json(\n      {\n        error: 'Internal server error',\n        details: process.env.NODE_ENV === 'development' ? String(error?.message || error) : undefined,\n        stack: process.env.NODE_ENV === 'development' ? error?.stack : undefined,\n      },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":"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CACA,OACA,4BACA,OACA,yDACA,OACA,cACA,QACA,kBACA,iDACA,qEACA,4EACA,mBACA,0EACA,8CACA,4BACA,aACA,sBACA,2CACA,8EACA,YACA,WACA,sBACA,0DACA,qBACA,cACA,8DACA,iGACA,qEACA,mCACA,cACA,YACA,WACA,4BACA,iCACA,uBACA,QACA,UACA,OACA,gCACA,gCACA,oDACA,4CACA,8CACA,mDACA,4DACA,gEACA,8DACA,OACA,8CACA,OACA,sLACA,OACA,mDACA,4DACA,2EACA,gDACA,2GACA,0GACA,OACA,wDACA,sGACA,sIACA,gIACA,qFACA,8IACA,OACA,sBACA,CAAC,iBAAiB,EAAE,MAAM,YAAY,CAAC,EAAE,CAAC,GAC1C,CAAC,eAAe,EAAE,MAAM,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,GAC/C,CAAC,qBAAqB,EAAE,MAAM,mBAAmB,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,GAChE,CAAC,kBAAkB,EAAE,aAAa,QAAQ,qBAAqB,EAAE,CAAC,GAClE,OACA,yCACA,OACA,2CACA,8CACA,6DACA,qMACA,oFACA,OACA,qDACA,sDACA,yEACA,iBACA,0EACA,mDACA,wCACA,4EACA,OACA,gDACA,mEACA,0EACA,OACA,iDACA,2FACA,wCACA,OACA,6BACA,oHACA,8FACA,yGACA,OACA,kBACA,8IACA,OACA,+UACA,sJACA,mNACA,uNACA,oLACA,2EACA,yFACA,OACA,4CACA,2KACA,2IACA,kKACA,4KACA,OACA,+BACA,gJACA,8HACA,oGACA,yHACA,+EACA,OACA,qCACA,qCACA,6FACA,wDACA,8DACA,OACA,YACA,OACA,+UACA,sJACA,mNACA,uNACA,oLACA,mHACA,yFACA,CAAC,UAAU,EAAE,MAAM,QAAQ,CAAC,EAAE,CAAC,GAC/B,CAAC,eAAe,EAAE,MAAM,YAAY,CAAC,EAAE,CAAC,GACxC,CAAC,YAAY,EAAE,MAAM,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,GAC5C,CAAC,iBAAiB,EAAE,SAAS,EAAE,CAA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"}}]
}