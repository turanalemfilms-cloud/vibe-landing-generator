{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\n\nexport function supabaseBrowser() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n  if (!url || !anon) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY')\n  return createClient(url, anon)\n}\n\nexport function supabaseServer() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const service = process.env.SUPABASE_SERVICE_ROLE_KEY\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\n  if (!url) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL')\n\n  // Prefer service role for server-side writes. Fallback to anon for quick demo.\n  const key = service || anon\n  if (!key) throw new Error('Missing SUPABASE_SERVICE_ROLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY')\n\n  return createClient(url, key, {\n    auth: { persistSession: false },\n  })\n}\n\nexport function supabaseService() {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const service = process.env.SUPABASE_SERVICE_ROLE_KEY\n  if (!url || !service) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL / SUPABASE_SERVICE_ROLE_KEY')\n  return createClient(url, service, { auth: { persistSession: false } })\n}\n\nexport function supabaseServerWithAccessToken(accessToken: string) {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const anon = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n  if (!url || !anon) throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY')\n  if (!accessToken) throw new Error('Missing access token')\n\n  // Use anon key + user JWT so RLS applies server-side.\n  return createClient(url, anon, {\n    auth: { persistSession: false },\n    global: {\n      headers: {\n        Authorization: `Bearer ${accessToken}`,\n      },\n    },\n  })\n}\n"],"names":[],"mappings":";;;;;;;;;;AAGc;AAHd;;AAEO,SAAS;IACd,MAAM;IACN,MAAM;IACN;;IACA,OAAO,IAAA,iMAAY,EAAC,KAAK;AAC3B;AAEO,SAAS;IACd,MAAM;IACN,MAAM,UAAU,2KAAO,CAAC,GAAG,CAAC,yBAAyB;IACrD,MAAM;IAEN;;IAEA,+EAA+E;IAC/E,MAAM,MAAM,WAAW;IACvB;;IAEA,OAAO,IAAA,iMAAY,EAAC,KAAK,KAAK;QAC5B,MAAM;YAAE,gBAAgB;QAAM;IAChC;AACF;AAEO,SAAS;IACd,MAAM;IACN,MAAM,UAAU,2KAAO,CAAC,GAAG,CAAC,yBAAyB;IACrD,IAAI,CAAC,OAAO,CAAC,SAAS,MAAM,IAAI,MAAM;IACtC,OAAO,IAAA,iMAAY,EAAC,KAAK,SAAS;QAAE,MAAM;YAAE,gBAAgB;QAAM;IAAE;AACtE;AAEO,SAAS,8BAA8B,WAAmB;IAC/D,MAAM;IACN,MAAM;IACN;;IACA,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;IAElC,sDAAsD;IACtD,OAAO,IAAA,iMAAY,EAAC,KAAK,MAAM;QAC7B,MAAM;YAAE,gBAAgB;QAAM;QAC9B,QAAQ;YACN,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,aAAa;YACxC;QACF;IACF;AACF"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/gulzhanserikbay/vibe-landing-generator/src/app/login/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabaseBrowser } from '@/lib/supabase'\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [email, setEmail] = useState('')\n  const [status, setStatus] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n\n  useEffect(() => {\n    const supabase = supabaseBrowser()\n    supabase.auth.getSession().then(({ data }) => {\n      if (data.session) router.replace('/dashboard')\n    })\n    const { data: sub } = supabase.auth.onAuthStateChange((_event, session) => {\n      if (session) router.replace('/dashboard')\n    })\n    return () => sub.subscription.unsubscribe()\n  }, [router])\n\n  async function sendMagicLink() {\n    const value = email.trim()\n    if (!value) return\n    setIsLoading(true)\n    setStatus(null)\n    try {\n      const supabase = supabaseBrowser()\n      const { error } = await supabase.auth.signInWithOtp({\n        email: value,\n        options: {\n          emailRedirectTo: `${window.location.origin}/dashboard`,\n        },\n      })\n      if (error) throw error\n      setStatus('Email-ге link жіберілді. Ашып кіріңіз.')\n    } catch (e: any) {\n      setStatus(String(e?.message || e))\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-dvh bg-slate-950 text-white\">\n      <div className=\"mx-auto max-w-md px-4 py-16\">\n        <h1 className=\"text-2xl font-semibold\">Login</h1>\n        <p className=\"mt-2 text-sm text-white/70\">Email OTP арқылы кіру.</p>\n\n        <div className=\"mt-6 grid gap-3\">\n          <input\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 outline-none focus:ring-4 focus:ring-sky-400/20\"\n            placeholder=\"you@email.com\"\n            disabled={isLoading}\n          />\n          <button\n            onClick={sendMagicLink}\n            className=\"rounded-2xl bg-sky-400 text-slate-950 px-5 py-3 font-semibold hover:opacity-90 disabled:opacity-60\"\n            disabled={isLoading}\n          >\n            {isLoading ? 'Жүктелуде…' : 'Send login link'}\n          </button>\n\n          {status ? <div className=\"text-sm text-white/80 whitespace-pre-wrap\">{status}</div> : null}\n        </div>\n      </div>\n    </div>\n  )\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAgB;IACpD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;+BAAC;YACR,MAAM,WAAW,IAAA,4IAAe;YAChC,SAAS,IAAI,CAAC,UAAU,GAAG,IAAI;uCAAC,CAAC,EAAE,IAAI,EAAE;oBACvC,IAAI,KAAK,OAAO,EAAE,OAAO,OAAO,CAAC;gBACnC;;YACA,MAAM,EAAE,MAAM,GAAG,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB;uCAAC,CAAC,QAAQ;oBAC7D,IAAI,SAAS,OAAO,OAAO,CAAC;gBAC9B;;YACA;uCAAO,IAAM,IAAI,YAAY,CAAC,WAAW;;QAC3C;8BAAG;QAAC;KAAO;IAEX,eAAe;QACb,MAAM,QAAQ,MAAM,IAAI;QACxB,IAAI,CAAC,OAAO;QACZ,aAAa;QACb,UAAU;QACV,IAAI;YACF,MAAM,WAAW,IAAA,4IAAe;YAChC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,aAAa,CAAC;gBAClD,OAAO;gBACP,SAAS;oBACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC;gBACxD;YACF;YACA,IAAI,OAAO,MAAM;YACjB,UAAU;QACZ,EAAE,OAAO,GAAQ;YACf,UAAU,OAAO,GAAG,WAAW;QACjC,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,6LAAC;oBAAE,WAAU;8BAA6B;;;;;;8BAE1C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,WAAU;4BACV,aAAY;4BACZ,UAAU;;;;;;sCAEZ,6LAAC;4BACC,SAAS;4BACT,WAAU;4BACV,UAAU;sCAET,YAAY,eAAe;;;;;;wBAG7B,uBAAS,6LAAC;4BAAI,WAAU;sCAA6C;;;;;mCAAgB;;;;;;;;;;;;;;;;;;AAKhG;GAlEwB;;QACP,kJAAS;;;KADF"}}]
}